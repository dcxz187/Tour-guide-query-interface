## æ•°æ®åº“å®éªŒ

---

### **(1) åˆ†æä¸šåŠ¡æµç¨‹ï¼Œç»˜åˆ¶æ•°æ®æµå›¾ï¼ˆDFDï¼‰ï¼Œç¼–å†™æ•°æ®å­—å…¸ï¼Œè¡¥å……å¯¹è±¡å’Œå±æ€§ä¿¡æ¯**

#### **ä¸šåŠ¡æµç¨‹åˆ†æ**
æ—…æ¸¸å…¬å¸ç”±å¤šä¸ªåˆ†å…¬å¸ç»„æˆï¼Œæ¯ä¸ªåˆ†å…¬å¸æœ‰ç»ç†ã€å¯¼æ¸¸å’Œå®¢æˆ·ã€‚ä¸»è¦ä¸šåŠ¡æµç¨‹åŒ…æ‹¬ï¼š
- **å‘˜å·¥ç®¡ç†**ï¼šè®°å½•å¯¼æ¸¸ä¿¡æ¯ï¼ˆå¯¼æ¸¸å·ã€èº«ä»½è¯å·ã€å§“åã€å¯¼æ¸¸èµ„æ ¼ç­‰çº§ç­‰ï¼‰ã€‚
- **æ—…æ¸¸çº¿è·¯ç®¡ç†**ï¼šç»´æŠ¤æ—…æ¸¸çº¿è·¯ä¿¡æ¯ï¼ˆåœ°ç‚¹ã€æ™¯ç‚¹ã€æ—¶é—´æ®µã€ä»·æ ¼ã€äº¤é€šæ–¹å¼ã€æœåŠ¡ç­‰çº§ç­‰ï¼‰ã€‚
- **å®¢æˆ·ç®¡ç†**ï¼šå­˜å‚¨å®¢æˆ·åŸºæœ¬ä¿¡æ¯ï¼ˆå§“åã€èº«ä»½è¯å·ã€å·¥ä½œå•ä½ã€èŒä¸šç­‰ï¼‰åŠæ—…æ¸¸ä¿¡æ¯ï¼ˆæ—…æ¸¸æ—¶é—´ã€çº¿è·¯ã€è´¹ç”¨ã€ä¿é™©ã€æœåŠ¡ç­‰çº§ã€åˆåŒç­‰ï¼‰ã€‚
- **æ—…æ¸¸å›¢ç®¡ç†**ï¼šå¯¼æ¸¸è´Ÿè´£æ—…æ¸¸å›¢ï¼Œæ¯å›¢æœ‰å¤šä¸ªå®¢æˆ·ã€‚
- **åˆåŒç®¡ç†**ï¼šæ¯æ¬¡æ—…æ¸¸éœ€ç­¾è®¢åˆåŒï¼Œè®°å½•çº¿è·¯ã€å¯¼æ¸¸ã€æœåŠ¡ç­‰çº§ã€ä¿é™©ã€è´¹ç”¨ã€æ—¶é—´ç­‰ã€‚
- **è´¢åŠ¡ç®¡ç†**ï¼šæŒ‰æœˆç»Ÿè®¡çº¿è·¯æ”¶å…¥ã€å®¢æˆ·æ¶ˆè´¹ã€å¯¼æ¸¸ä¸šç»©ï¼ˆåˆ†ç±»è´¦ï¼‰åŠåˆ†å…¬å¸é”€å”®ä¸šç»©ï¼ˆæ€»è´¦ï¼‰ã€‚

#### **æ•°æ®æµå›¾ï¼ˆDFDï¼‰**
**0çº§DFDï¼ˆä¸Šä¸‹æ–‡å›¾ï¼‰**ï¼š
- **å¤–éƒ¨å®ä½“**ï¼šå®¢æˆ·ã€å¯¼æ¸¸ã€ç»ç†ã€è´¢åŠ¡å®¡è®¡å‘˜ã€‚
- **ä¸»æµç¨‹**ï¼šæ—…æ¸¸ç®¡ç†ç³»ç»Ÿã€‚
- **æ•°æ®æµ**ï¼š
    - å®¢æˆ· â†’ ç³»ç»Ÿï¼šå®¢æˆ·ä¿¡æ¯ã€æ—…æ¸¸è¯·æ±‚ã€åˆåŒç­¾åã€‚
    - ç³»ç»Ÿ â†’ å®¢æˆ·ï¼šçº¿è·¯è¯¦æƒ…ã€åˆåŒã€è´¦å•ã€‚
    - å¯¼æ¸¸ â†’ ç³»ç»Ÿï¼šå¯ç”¨æ€§ã€æ—…æ¸¸å›¢åˆ†é…ã€‚
    - ç³»ç»Ÿ â†’ å¯¼æ¸¸ï¼šæ—…æ¸¸æ—¥ç¨‹ã€å®¢æˆ·åˆ—è¡¨ã€‚
    - ç»ç† â†’ ç³»ç»Ÿï¼šåˆ†å…¬å¸ä¿¡æ¯ã€å‘˜å·¥è®°å½•ã€‚
    - ç³»ç»Ÿ â†’ è´¢åŠ¡å®¡è®¡å‘˜ï¼šåˆ†ç±»è´¦ã€æ€»è´¦æŠ¥è¡¨ã€‚

**1çº§DFD**ï¼š
- **å­æµç¨‹**ï¼š
    1. ç®¡ç†å‘˜å·¥æ•°æ®ï¼ˆå­˜å‚¨å¯¼æ¸¸/ç»ç†ä¿¡æ¯ï¼‰ã€‚
    2. ç®¡ç†æ—…æ¸¸çº¿è·¯ï¼ˆç»´æŠ¤çº¿è·¯ã€æ™¯ç‚¹ã€æ—¶é—´æ®µç­‰ï¼‰ã€‚
    3. ç®¡ç†å®¢æˆ·æ•°æ®ï¼ˆè®°å½•å®¢æˆ·ä¿¡æ¯åŠæ—…æ¸¸å†å²ï¼‰ã€‚
    4. åˆ†é…æ—…æ¸¸å›¢ï¼ˆå¯¼æ¸¸ä¸å®¢æˆ·å…³è”ï¼‰ã€‚
    5. ç”ŸæˆåˆåŒï¼ˆè®°å½•æ—…æ¸¸ç»†èŠ‚ï¼‰ã€‚
    6. è´¢åŠ¡ç»Ÿè®¡ï¼ˆç”Ÿæˆåˆ†ç±»è´¦å’Œæ€»è´¦ï¼‰ã€‚
- **æ•°æ®å­˜å‚¨**ï¼šå‘˜å·¥åº“ã€çº¿è·¯åº“ã€å®¢æˆ·åº“ã€åˆåŒåº“ã€è´¢åŠ¡åº“ã€‚
- **æ•°æ®æµ**ï¼šå„å­æµç¨‹ä¸æ•°æ®å­˜å‚¨ã€å¤–éƒ¨å®ä½“ä¹‹é—´çš„äº¤äº’ã€‚

#### **æ•°æ®å­—å…¸**
ä»¥ä¸‹ä¸ºä¸»è¦æ•°æ®é¡¹çš„å®šä¹‰ï¼ˆéƒ¨åˆ†ç¤ºä¾‹ï¼Œå®Œæ•´å­—å…¸å¯æ‰©å±•ï¼‰ï¼š
- **å‘˜å·¥**ï¼š
    - å¯¼æ¸¸å·ï¼šå”¯ä¸€æ ‡è¯†ï¼Œå­—ç¬¦ä¸²ï¼Œä¸»é”®ã€‚
    - èº«ä»½è¯å·ï¼šå­—ç¬¦ä¸²ï¼Œå”¯ä¸€ã€‚
    - å§“åï¼šå­—ç¬¦ä¸²ã€‚
    - å¯¼æ¸¸èµ„æ ¼ç­‰çº§ï¼šæšä¸¾ï¼ˆå¦‚åˆçº§ã€ä¸­çº§ã€é«˜çº§ï¼‰ã€‚
    - åˆ†å…¬å¸IDï¼šå¤–é”®ï¼Œå…³è”åˆ†å…¬å¸ã€‚
- **æ—…æ¸¸çº¿è·¯**ï¼š
    - çº¿è·¯IDï¼šå”¯ä¸€æ ‡è¯†ï¼Œå­—ç¬¦ä¸²ï¼Œä¸»é”®ã€‚
    - åœ°ç‚¹ï¼šå­—ç¬¦ä¸²åˆ—è¡¨ã€‚
    - æ™¯ç‚¹ï¼šå­—ç¬¦ä¸²åˆ—è¡¨ã€‚
    - æ—¶é—´æ®µï¼šæ—¥æœŸèŒƒå›´ã€‚
    - ä»·æ ¼ï¼šæ•°å€¼ï¼ŒæŒ‰æ—¶é—´æ®µå’ŒæœåŠ¡ç­‰çº§ã€‚
    - äº¤é€šæ–¹å¼ï¼šå­—ç¬¦ä¸²ï¼ˆå¦‚é£æœºã€ç«è½¦ï¼‰ã€‚
    - æœåŠ¡ç­‰çº§ï¼šæšä¸¾ï¼ˆå¦‚æ ‡å‡†ã€è±ªåï¼‰ã€‚
- **å®¢æˆ·**ï¼š
    - å®¢æˆ·IDï¼šå”¯ä¸€æ ‡è¯†ï¼Œå­—ç¬¦ä¸²ï¼Œä¸»é”®ã€‚
    - èº«ä»½è¯å·ï¼šå­—ç¬¦ä¸²ï¼Œå”¯ä¸€ã€‚
    - å§“åï¼šå­—ç¬¦ä¸²ã€‚
    - å·¥ä½œå•ä½ï¼šå­—ç¬¦ä¸²ï¼Œå¯ç©ºã€‚
    - èŒä¸šï¼šå­—ç¬¦ä¸²ã€‚
- **æ—…æ¸¸ä¿¡æ¯**ï¼š
    - æ—…æ¸¸IDï¼šå”¯ä¸€æ ‡è¯†ï¼Œå­—ç¬¦ä¸²ï¼Œä¸»é”®ã€‚
    - å®¢æˆ·IDï¼šå¤–é”®ã€‚
    - çº¿è·¯IDï¼šå¤–é”®ã€‚
    - æ—…æ¸¸æ—¶é—´ï¼šæ—¥æœŸã€‚
    - è´¹ç”¨ï¼šæ•°å€¼ã€‚
    - ä¿é™©ï¼šå­—ç¬¦ä¸²ï¼ˆå¦‚ä¿é™©ç±»å‹ï¼‰ã€‚
    - æœåŠ¡ç­‰çº§ï¼šæšä¸¾ã€‚
    - åˆåŒIDï¼šå¤–é”®ã€‚
- **åˆåŒ**ï¼š
    - åˆåŒIDï¼šå”¯ä¸€æ ‡è¯†ï¼Œå­—ç¬¦ä¸²ï¼Œä¸»é”®ã€‚
    - ç‰ˆæœ¬å·ï¼šå­—ç¬¦ä¸²ã€‚
    - çº¿è·¯IDï¼šå¤–é”®ã€‚
    - å¯¼æ¸¸IDï¼šå¤–é”®ã€‚
    - æœåŠ¡ç­‰çº§ï¼šæšä¸¾ã€‚
    - ä¿é™©ä¿¡æ¯ï¼šå­—ç¬¦ä¸²ã€‚
    - è´¹ç”¨çº¦å®šï¼šæ•°å€¼ã€‚
    - æ—…æ¸¸æ—¶é—´ï¼šæ—¥æœŸã€‚
- **æ—…æ¸¸å›¢**ï¼š
    - æ—…æ¸¸å›¢IDï¼šå”¯ä¸€æ ‡è¯†ï¼Œå­—ç¬¦ä¸²ï¼Œä¸»é”®ã€‚
    - å¯¼æ¸¸IDï¼šå¤–é”®ã€‚
    - çº¿è·¯IDï¼šå¤–é”®ã€‚
    - å®¢æˆ·IDåˆ—è¡¨ï¼šå¤–é”®é›†åˆã€‚
    - æ—…æ¸¸æ—¶é—´ï¼šæ—¥æœŸã€‚
- **è´¢åŠ¡è´¦ç›®**ï¼š
    - è´¦ç›®IDï¼šå”¯ä¸€æ ‡è¯†ï¼Œå­—ç¬¦ä¸²ï¼Œä¸»é”®ã€‚
    - ç±»å‹ï¼šæšä¸¾ï¼ˆåˆ†ç±»è´¦ã€æ€»è´¦ï¼‰ã€‚
    - ç»Ÿè®¡æœˆä»½ï¼šæ—¥æœŸã€‚
    - çº¿è·¯ID/å®¢æˆ·ID/å¯¼æ¸¸ID/åˆ†å…¬å¸IDï¼šå¤–é”®ï¼ˆè§†è´¦ç›®ç±»å‹ï¼‰ã€‚
    - é‡‘é¢ï¼šæ•°å€¼ã€‚

#### **è¡¥å……ä¿¡æ¯**
- **åˆ†å…¬å¸**ï¼šæ–°å¢å±æ€§ï¼šåˆ†å…¬å¸IDï¼ˆä¸»é”®ï¼‰ã€åç§°ã€åŠå…¬åœ°å€ã€ç»ç†IDï¼ˆå¤–é”®ï¼Œå…³è”å‘˜å·¥ï¼‰ã€‚
- **æ—…æ¸¸æ—¶é—´æ®µ**ï¼šæ˜ç¡®ä¸ºæ—¥æœŸèŒƒå›´ï¼ˆå¦‚2025-06-01è‡³2025-06-07ï¼‰ã€‚
- **æœåŠ¡ç­‰çº§**ï¼šå®šä¹‰ä¸ºæšä¸¾å€¼ï¼ˆæ ‡å‡†ã€é«˜çº§ã€è±ªåï¼‰ã€‚
- **ä¿é™©ä¿¡æ¯**ï¼šåŒ…æ‹¬ä¿é™©ç±»å‹ï¼ˆå¦‚æ„å¤–é™©ã€åŒ»ç–—é™©ï¼‰å’Œä¿é¢ã€‚

---

### **(2) åˆ†æå®ä½“åŠå…¶å…³ç³»ï¼Œç¡®å®šå®ä½“å¯¹è±¡å’Œå±æ€§ï¼Œç»˜åˆ¶E-Rå›¾ï¼ŒæŒ‡å®šå…³é”®å±æ€§**

#### **å®ä½“åŠå…¶å±æ€§**
1. **åˆ†å…¬å¸**ï¼š
    - å±æ€§ï¼šåˆ†å…¬å¸IDï¼ˆä¸»é”®ï¼‰ã€åç§°ã€åŠå…¬åœ°å€ã€ç»ç†IDã€‚
2. **å‘˜å·¥**ï¼š
    - å±æ€§ï¼šå¯¼æ¸¸å·ï¼ˆä¸»é”®ï¼‰ã€èº«ä»½è¯å·ã€å§“åã€å¯¼æ¸¸èµ„æ ¼ç­‰çº§ã€åˆ†å…¬å¸IDã€‚
3. **æ—…æ¸¸çº¿è·¯**ï¼š
    - å±æ€§ï¼šçº¿è·¯IDï¼ˆä¸»é”®ï¼‰ã€åœ°ç‚¹ã€æ™¯ç‚¹ã€æ—¶é—´æ®µã€ä»·æ ¼ã€äº¤é€šæ–¹å¼ã€æœåŠ¡ç­‰çº§ã€‚
4. **å®¢æˆ·**ï¼š
    - å±æ€§ï¼šå®¢æˆ·IDï¼ˆä¸»é”®ï¼‰ã€èº«ä»½è¯å·ã€å§“åã€å·¥ä½œå•ä½ã€èŒä¸šã€‚
5. **æ—…æ¸¸ä¿¡æ¯**ï¼š
    - å±æ€§ï¼šæ—…æ¸¸IDï¼ˆä¸»é”®ï¼‰ã€å®¢æˆ·IDã€çº¿è·¯IDã€æ—…æ¸¸æ—¶é—´ã€è´¹ç”¨ã€ä¿é™©ã€æœåŠ¡ç­‰çº§ã€åˆåŒIDã€‚
6. **åˆåŒ**ï¼š
    - å±æ€§ï¼šåˆåŒIDï¼ˆä¸»é”®ï¼‰ã€ç‰ˆæœ¬å·ã€çº¿è·¯IDã€å¯¼æ¸¸IDã€æœåŠ¡ç­‰çº§ã€ä¿é™©ä¿¡æ¯ã€è´¹ç”¨çº¦å®šã€æ—…æ¸¸æ—¶é—´ã€‚
7. **æ—…æ¸¸å›¢**ï¼š
    - å±æ€§ï¼šæ—…æ¸¸å›¢IDï¼ˆä¸»é”®ï¼‰ã€å¯¼æ¸¸IDã€çº¿è·¯IDã€æ—…æ¸¸æ—¶é—´ã€‚
8. **è´¢åŠ¡è´¦ç›®**ï¼š
    - å±æ€§ï¼šè´¦ç›®IDï¼ˆä¸»é”®ï¼‰ã€ç±»å‹ã€ç»Ÿè®¡æœˆä»½ã€å…³è”IDï¼ˆçº¿è·¯ID/å®¢æˆ·ID/å¯¼æ¸¸ID/åˆ†å…¬å¸IDï¼‰ã€é‡‘é¢ã€‚

#### **å®ä½“å…³ç³»**
- **åˆ†å…¬å¸-å‘˜å·¥**ï¼š1:Nï¼ˆä¸€ä¸ªåˆ†å…¬å¸æœ‰å¤šä¸ªå‘˜å·¥ï¼‰ã€‚
- **å‘˜å·¥-æ—…æ¸¸å›¢**ï¼š1:Nï¼ˆä¸€ä¸ªå¯¼æ¸¸è´Ÿè´£å¤šä¸ªæ—…æ¸¸å›¢ï¼‰ã€‚
- **æ—…æ¸¸çº¿è·¯-æ—…æ¸¸å›¢**ï¼š1:Nï¼ˆä¸€æ¡çº¿è·¯å¯ç”¨äºå¤šä¸ªæ—…æ¸¸å›¢ï¼‰ã€‚
- **å®¢æˆ·-æ—…æ¸¸ä¿¡æ¯**ï¼š1:Nï¼ˆä¸€ä¸ªå®¢æˆ·æœ‰å¤šæ¬¡æ—…æ¸¸è®°å½•ï¼‰ã€‚
- **æ—…æ¸¸å›¢-å®¢æˆ·**ï¼šN:Nï¼ˆä¸€ä¸ªæ—…æ¸¸å›¢æœ‰å¤šä¸ªå®¢æˆ·ï¼Œä¸€ä¸ªå®¢æˆ·å¯å‚åŠ å¤šä¸ªæ—…æ¸¸å›¢ï¼‰ã€‚
- **æ—…æ¸¸ä¿¡æ¯-åˆåŒ**ï¼š1:1ï¼ˆä¸€æ¬¡æ—…æ¸¸å¯¹åº”ä¸€ä¸ªåˆåŒï¼‰ã€‚
- **æ—…æ¸¸çº¿è·¯-åˆåŒ**ï¼š1:Nï¼ˆä¸€æ¡çº¿è·¯å¯å¯¹åº”å¤šä¸ªåˆåŒï¼‰ã€‚
- **è´¢åŠ¡è´¦ç›®**ï¼šä¸çº¿è·¯ã€å®¢æˆ·ã€å¯¼æ¸¸ã€åˆ†å…¬å¸æœ‰å…³ï¼Œè§†è´¦ç›®ç±»å‹è€Œå®šã€‚

#### **E-Rå›¾**
ï¼ˆç”±äºæ–‡æœ¬é™åˆ¶ï¼Œæè¿°E-Rå›¾ç»“æ„ï¼Œå®é™…éœ€ç”¨å·¥å…·å¦‚Visioç»˜åˆ¶ï¼‰
- **å®ä½“**ï¼šç”¨çŸ©å½¢è¡¨ç¤ºï¼ˆå¦‚â€œåˆ†å…¬å¸â€â€œå‘˜å·¥â€ï¼‰ã€‚
- **å±æ€§**ï¼šç”¨æ¤­åœ†è¿æ¥åˆ°å®ä½“ï¼Œä¸»é”®åŠ ä¸‹åˆ’çº¿ï¼ˆå¦‚â€œåˆ†å…¬å¸IDâ€ï¼‰ã€‚
- **å…³ç³»**ï¼šç”¨è±å½¢è¡¨ç¤ºï¼Œæ ‡æ³¨å…³ç³»ç±»å‹ï¼ˆå¦‚â€œ1:Nâ€ï¼‰ã€‚
    - åˆ†å…¬å¸ â†’ å‘˜å·¥ï¼š1:Nï¼Œè¿æ¥â€œåˆ†å…¬å¸IDâ€ã€‚
    - å‘˜å·¥ â†’ æ—…æ¸¸å›¢ï¼š1:Nï¼Œè¿æ¥â€œå¯¼æ¸¸å·â€ã€‚
    - å®¢æˆ· â†” æ—…æ¸¸å›¢ï¼šN:Nï¼Œé€šè¿‡ä¸­é—´å®ä½“â€œæ—…æ¸¸å›¢-å®¢æˆ·â€å®ç°ã€‚
    - æ—…æ¸¸ä¿¡æ¯ â†’ åˆåŒï¼š1:1ï¼Œè¿æ¥â€œåˆåŒIDâ€ã€‚
    - è´¢åŠ¡è´¦ç›®ä¸ç›¸å…³å®ä½“é€šè¿‡â€œå…³è”IDâ€è¿æ¥ã€‚

#### **å…³é”®å±æ€§**
- åˆ†å…¬å¸ï¼šåˆ†å…¬å¸IDã€‚
- å‘˜å·¥ï¼šå¯¼æ¸¸å·ã€‚
- æ—…æ¸¸çº¿è·¯ï¼šçº¿è·¯IDã€‚
- å®¢æˆ·ï¼šå®¢æˆ·IDã€‚
- æ—…æ¸¸ä¿¡æ¯ï¼šæ—…æ¸¸IDã€‚
- åˆåŒï¼šåˆåŒIDã€‚
- æ—…æ¸¸å›¢ï¼šæ—…æ¸¸å›¢IDã€‚
- è´¢åŠ¡è´¦ç›®ï¼šè´¦ç›®IDã€‚

---

### **(3) å°†E-Rå›¾è½¬æ¢ä¸ºå…³ç³»æ•°æ®åº“æ¨¡å‹ï¼Œå®šä¹‰å®Œæ•´æ€§çº¦æŸ**

#### **å…³ç³»æ¨¡å‹**
1. **åˆ†å…¬å¸**ï¼š
    - å…³ç³»ï¼šåˆ†å…¬å¸(åˆ†å…¬å¸ID, åç§°, åŠå…¬åœ°å€, ç»ç†ID)
    - ä¸»é”®ï¼šåˆ†å…¬å¸ID
2. **å‘˜å·¥**ï¼š
    - å…³ç³»ï¼šå‘˜å·¥(å¯¼æ¸¸å·, èº«ä»½è¯å·, å§“å, å¯¼æ¸¸èµ„æ ¼ç­‰çº§, åˆ†å…¬å¸ID)
    - ä¸»é”®ï¼šå¯¼æ¸¸å·
3. **æ—…æ¸¸çº¿è·¯**ï¼š
    - å…³ç³»ï¼šæ—…æ¸¸çº¿è·¯(çº¿è·¯ID, åœ°ç‚¹, æ™¯ç‚¹, æ—¶é—´æ®µ, ä»·æ ¼, äº¤é€šæ–¹å¼, æœåŠ¡ç­‰çº§)
    - ä¸»é”®ï¼šçº¿è·¯ID
4. **å®¢æˆ·**ï¼š
    - å…³ç³»ï¼šå®¢æˆ·(å®¢æˆ·ID, èº«ä»½è¯å·, å§“å, å·¥ä½œå•ä½, èŒä¸š)
    - ä¸»é”®ï¼šå®¢æˆ·ID
5. **æ—…æ¸¸ä¿¡æ¯**ï¼š
    - å…³ç³»ï¼šæ—…æ¸¸ä¿¡æ¯(æ—…æ¸¸ID, å®¢æˆ·ID, çº¿è·¯ID, æ—…æ¸¸æ—¶é—´, è´¹ç”¨, ä¿é™©, æœåŠ¡ç­‰çº§, åˆåŒID)
    - ä¸»é”®ï¼šæ—…æ¸¸ID
6. **åˆåŒ**ï¼š
    - å…³ç³»ï¼šåˆåŒ(åˆåŒID, ç‰ˆæœ¬å·, çº¿è·¯ID, å¯¼æ¸¸ID, æœåŠ¡ç­‰çº§, ä¿é™©ä¿¡æ¯, è´¹ç”¨çº¦å®š, æ—…æ¸¸æ—¶é—´)
    - ä¸»é”®ï¼šåˆåŒID
7. **æ—…æ¸¸å›¢**ï¼š
    - å…³ç³»ï¼šæ—…æ¸¸å›¢(æ—…æ¸¸å›¢ID, å¯¼æ¸¸ID, çº¿è·¯ID, æ—…æ¸¸æ—¶é—´)
    - ä¸»é”®ï¼šæ—…æ¸¸å›¢ID
8. **æ—…æ¸¸å›¢-å®¢æˆ·**ï¼ˆN:Nå…³ç³»ä¸­é—´è¡¨ï¼‰ï¼š
    - å…³ç³»ï¼šæ—…æ¸¸å›¢_å®¢æˆ·(æ—…æ¸¸å›¢ID, å®¢æˆ·ID)
    - ä¸»é”®ï¼š(æ—…æ¸¸å›¢ID, å®¢æˆ·ID)
9. **è´¢åŠ¡è´¦ç›®**ï¼š
    - å…³ç³»ï¼šè´¢åŠ¡è´¦ç›®(è´¦ç›®ID, ç±»å‹, ç»Ÿè®¡æœˆä»½, å…³è”ID, é‡‘é¢)
    - ä¸»é”®ï¼šè´¦ç›®ID

#### **å®Œæ•´æ€§çº¦æŸ**
1. **å®ä½“å®Œæ•´æ€§**ï¼š
    - æ¯ä¸ªå…³ç³»çš„ä¸»é”®éç©ºä¸”å”¯ä¸€ï¼ˆå¦‚åˆ†å…¬å¸IDã€å¯¼æ¸¸å·ç­‰ï¼‰ã€‚
2. **å‚ç…§å®Œæ•´æ€§**ï¼š
    - å‘˜å·¥.åˆ†å…¬å¸ID â†’ åˆ†å…¬å¸.åˆ†å…¬å¸ID
    - å‘˜å·¥.ç»ç†ID â†’ å‘˜å·¥.å¯¼æ¸¸å·
    - æ—…æ¸¸ä¿¡æ¯.å®¢æˆ·ID â†’ å®¢æˆ·.å®¢æˆ·ID
    - æ—…æ¸¸ä¿¡æ¯.çº¿è·¯ID â†’ æ—…æ¸¸çº¿è·¯.çº¿è·¯ID
    - æ—…æ¸¸ä¿¡æ¯.åˆåŒID â†’ åˆåŒ.åˆåŒID
    - åˆåŒ.çº¿è·¯ID â†’ æ—…æ¸¸çº¿è·¯.çº¿è·¯ID
    - åˆåŒ.å¯¼æ¸¸ID â†’ å‘˜å·¥.å¯¼æ¸¸å·
    - æ—…æ¸¸å›¢.å¯¼æ¸¸ID â†’ å‘˜å·¥.å¯¼æ¸¸å·
    - æ—…æ¸¸å›¢.çº¿è·¯ID â†’ æ—…æ¸¸çº¿è·¯.çº¿è·¯ID
    - æ—…æ¸¸å›¢_å®¢æˆ·.æ—…æ¸¸å›¢ID â†’ æ—…æ¸¸å›¢.æ—…æ¸¸å›¢ID
    - æ—…æ¸¸å›¢_å®¢æˆ·.å®¢æˆ·ID â†’ å®¢æˆ·.å®¢æˆ·ID
    - è´¢åŠ¡è´¦ç›®.å…³è”ID â†’ å¯¹åº”å®ä½“ä¸»é”®ï¼ˆè§†ç±»å‹ï¼Œå¦‚çº¿è·¯IDã€å®¢æˆ·IDç­‰ï¼‰ã€‚
3. **ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§**ï¼š
    - å¯¼æ¸¸èµ„æ ¼ç­‰çº§ï¼šé™åˆ¶ä¸ºæšä¸¾å€¼ï¼ˆåˆçº§ã€ä¸­çº§ã€é«˜çº§ï¼‰ã€‚
    - æœåŠ¡ç­‰çº§ï¼šé™åˆ¶ä¸ºæšä¸¾å€¼ï¼ˆæ ‡å‡†ã€é«˜çº§ã€è±ªåï¼‰ã€‚
    - èº«ä»½è¯å·ï¼šå”¯ä¸€ä¸”ç¬¦åˆæ ¼å¼ï¼ˆå¦‚18ä½ï¼‰ã€‚
    - ä»·æ ¼ã€è´¹ç”¨ï¼šéè´Ÿæ•°å€¼ã€‚
    - æ—…æ¸¸æ—¶é—´ã€ç»Ÿè®¡æœˆä»½ï¼šæœ‰æ•ˆæ—¥æœŸæ ¼å¼ã€‚

---

### **(4) ç”¨BCNFå’Œ3NFç†è®ºåˆ†æä¼˜åŒ–å…³ç³»æ¨¡å‹**

#### **è§„èŒƒåŒ–åˆ†æ**
æ£€æŸ¥æ¯ä¸ªå…³ç³»æ˜¯å¦æ»¡è¶³**3NF**ï¼ˆæ— ä¼ é€’ä¾èµ–ï¼‰å’Œ**BCNF**ï¼ˆæ‰€æœ‰å†³å®šå› ç´ ä¸ºä¸»é”®ï¼‰ã€‚

1. **åˆ†å…¬å¸**ï¼š
    - å‡½æ•°ä¾èµ–ï¼šåˆ†å…¬å¸ID â†’ åç§°, åŠå…¬åœ°å€, ç»ç†ID
    - æ»¡è¶³BCNFï¼ˆå†³å®šå› ç´ åˆ†å…¬å¸IDä¸ºä¸»é”®ï¼‰ã€‚
2. **å‘˜å·¥**ï¼š
    - å‡½æ•°ä¾èµ–ï¼šå¯¼æ¸¸å· â†’ èº«ä»½è¯å·, å§“å, å¯¼æ¸¸èµ„æ ¼ç­‰çº§, åˆ†å…¬å¸ID
    - æ»¡è¶³BCNFã€‚
3. **æ—…æ¸¸çº¿è·¯**ï¼š
    - å‡½æ•°ä¾èµ–ï¼šçº¿è·¯ID â†’ åœ°ç‚¹, æ™¯ç‚¹, æ—¶é—´æ®µ, ä»·æ ¼, äº¤é€šæ–¹å¼, æœåŠ¡ç­‰çº§
    - æ»¡è¶³BCNFã€‚
4. **å®¢æˆ·**ï¼š
    - å‡½æ•°ä¾èµ–ï¼šå®¢æˆ·ID â†’ èº«ä»½è¯å·, å§“å, å·¥ä½œå•ä½, èŒä¸š
    - æ»¡è¶³BCNFã€‚
5. **æ—…æ¸¸ä¿¡æ¯**ï¼š
    - å‡½æ•°ä¾èµ–ï¼šæ—…æ¸¸ID â†’ å®¢æˆ·ID, çº¿è·¯ID, æ—…æ¸¸æ—¶é—´, è´¹ç”¨, ä¿é™©, æœåŠ¡ç­‰çº§, åˆåŒID
    - æ»¡è¶³BCNFã€‚
6. **åˆåŒ**ï¼š
    - å‡½æ•°ä¾èµ–ï¼šåˆåŒID â†’ ç‰ˆæœ¬å·, çº¿è·¯ID, å¯¼æ¸¸ID, æœåŠ¡ç­‰çº§, ä¿é™©ä¿¡æ¯, è´¹ç”¨çº¦å®š, æ—…æ¸¸æ—¶é—´
    - æ»¡è¶³BCNFã€‚
7. **æ—…æ¸¸å›¢**ï¼š
    - å‡½æ•°ä¾èµ–ï¼šæ—…æ¸¸å›¢ID â†’ å¯¼æ¸¸ID, çº¿è·¯ID, æ—…æ¸¸æ—¶é—´
    - æ»¡è¶³BCNFã€‚
8. **æ—…æ¸¸å›¢_å®¢æˆ·**ï¼š
    - å‡½æ•°ä¾èµ–ï¼š(æ—…æ¸¸å›¢ID, å®¢æˆ·ID) â†’ æ— å…¶ä»–å±æ€§
    - æ»¡è¶³BCNFã€‚
9. **è´¢åŠ¡è´¦ç›®**ï¼š
    - å‡½æ•°ä¾èµ–ï¼šè´¦ç›®ID â†’ ç±»å‹, ç»Ÿè®¡æœˆä»½, å…³è”ID, é‡‘é¢
    - æ»¡è¶³BCNFã€‚

#### **ä¼˜åŒ–**
- æ‰€æœ‰å…³ç³»å·²æ»¡è¶³BCNFï¼Œæ— éœ€åˆ†è§£ã€‚
- **æ½œåœ¨é—®é¢˜**ï¼šæ—…æ¸¸çº¿è·¯çš„â€œåœ°ç‚¹â€â€œæ™¯ç‚¹â€å¯èƒ½æ˜¯å¤šå€¼å±æ€§ï¼Œå¯èƒ½éœ€è¦æ‹†åˆ†ä¸ºç‹¬ç«‹å…³ç³»ï¼š
    - åœ°ç‚¹è¡¨ï¼š(çº¿è·¯ID, åœ°ç‚¹)
    - æ™¯ç‚¹è¡¨ï¼š(çº¿è·¯ID, æ™¯ç‚¹)
    - è¿™æ ·å¯é¿å…å­˜å‚¨é‡å¤çš„åˆ—è¡¨æ•°æ®ï¼Œç¬¦åˆ3NFã€‚
- **ç´¢å¼•ä¼˜åŒ–**ï¼š
    - ä¸ºé¢‘ç¹æŸ¥è¯¢çš„å¤–é”®ï¼ˆå¦‚å®¢æˆ·IDã€çº¿è·¯IDï¼‰åˆ›å»ºç´¢å¼•ã€‚
    - ä¸ºè´¢åŠ¡è´¦ç›®çš„ç»Ÿè®¡æœˆä»½åˆ›å»ºç´¢å¼•ä»¥åŠ é€ŸæŒ‰æœˆç»Ÿè®¡ã€‚

---

### **(5) åˆ†ææ•°æ®è§„æ¨¡ï¼Œæ‰¾å‡ºå¤§å…³ç³»ï¼Œæå‡ºå­˜å‚¨ç»“æ„å’Œç­–ç•¥**

#### **æ•°æ®è§„æ¨¡åˆ†æ**
- **åˆ†å…¬å¸**ï¼šæ•°é‡è¾ƒå°‘ï¼ˆå‡è®¾10-50ä¸ªï¼‰ï¼Œæ•°æ®è§„æ¨¡å°ã€‚
- **å‘˜å·¥**ï¼šæ¯åˆ†å…¬å¸10-50åå¯¼æ¸¸ï¼Œå‡è®¾50åˆ†å…¬å¸ï¼Œæ€»è®¡500-2500è¡Œï¼Œä¸­ç­‰è§„æ¨¡ã€‚
- **æ—…æ¸¸çº¿è·¯**ï¼šæ¯åˆ†å…¬å¸10-20æ¡çº¿è·¯ï¼Œæ€»è®¡500-1000è¡Œï¼Œä¸­ç­‰è§„æ¨¡ã€‚
- **å®¢æˆ·**ï¼šå‡è®¾æ¯å¹´æœåŠ¡10ä¸‡å®¢æˆ·ï¼Œæ•°æ®è§„æ¨¡å¤§ã€‚
- **æ—…æ¸¸ä¿¡æ¯**ï¼šæ¯ä¸ªå®¢æˆ·å¹³å‡2æ¬¡æ—…æ¸¸ï¼Œæ€»è®¡20ä¸‡è¡Œï¼Œ**å¤§å…³ç³»**ã€‚
- **åˆåŒ**ï¼šä¸æ—…æ¸¸ä¿¡æ¯1:1ï¼Œæ€»è®¡20ä¸‡è¡Œï¼Œ**å¤§å…³ç³»**ã€‚
- **æ—…æ¸¸å›¢**ï¼šå‡è®¾æ¯æœˆ100ä¸ªå›¢ï¼Œ10å¹´çº¦1.2ä¸‡è¡Œï¼Œä¸­ç­‰è§„æ¨¡ã€‚
- **æ—…æ¸¸å›¢_å®¢æˆ·**ï¼šæ¯ä¸ªå›¢20-50äººï¼Œæ€»è®¡40ä¸‡è¡Œï¼Œ**å¤§å…³ç³»**ã€‚
- **è´¢åŠ¡è´¦ç›®**ï¼šæŒ‰æœˆç»Ÿè®¡çº¿è·¯ã€å®¢æˆ·ã€å¯¼æ¸¸ã€åˆ†å…¬å¸ï¼Œçº¦10ä¸‡è¡Œï¼Œ**å¤§å…³ç³»**ã€‚

#### **å¤§å…³ç³»**
- **æ—…æ¸¸ä¿¡æ¯**ï¼ˆ20ä¸‡è¡Œï¼‰
- **åˆåŒ**ï¼ˆ20ä¸‡è¡Œï¼‰
- **æ—…æ¸¸å›¢_å®¢æˆ·**ï¼ˆ40ä¸‡è¡Œï¼‰
- **è´¢åŠ¡è´¦ç›®**ï¼ˆ10ä¸‡è¡Œï¼‰

#### **å­˜å‚¨ç»“æ„å’Œç­–ç•¥**
1. **åˆ†åŒºå­˜å‚¨**ï¼š
    - **æ—…æ¸¸ä¿¡æ¯ã€åˆåŒ**ï¼šæŒ‰æ—…æ¸¸æ—¶é—´åˆ†åŒºï¼ˆå¦‚æŒ‰å¹´ï¼š2023ã€2024ã€2025ï¼‰ï¼ŒåŠ é€Ÿæ—¶é—´èŒƒå›´æŸ¥è¯¢ã€‚
    - **è´¢åŠ¡è´¦ç›®**ï¼šæŒ‰ç»Ÿè®¡æœˆä»½åˆ†åŒºï¼ˆå¦‚2025-01ã€2025-02ï¼‰ã€‚
    - **æ—…æ¸¸å›¢_å®¢æˆ·**ï¼šæŒ‰æ—…æ¸¸å›¢IDåˆ†åŒºï¼Œå‡å°‘å•è¡¨æ‰«æã€‚
2. **ç´¢å¼•**ï¼š
    - æ—…æ¸¸ä¿¡æ¯ï¼šå®¢æˆ·IDã€çº¿è·¯IDã€æ—…æ¸¸æ—¶é—´ã€‚
    - åˆåŒï¼šçº¿è·¯IDã€å¯¼æ¸¸IDã€‚
    - æ—…æ¸¸å›¢_å®¢æˆ·ï¼šæ—…æ¸¸å›¢IDã€å®¢æˆ·IDã€‚
    - è´¢åŠ¡è´¦ç›®ï¼šç»Ÿè®¡æœˆä»½ã€å…³è”IDã€‚
3. **å‹ç¼©**ï¼š
    - å¯¹å†å²æ•°æ®ï¼ˆå¦‚3å¹´å‰çš„æ—…æ¸¸ä¿¡æ¯ã€åˆåŒï¼‰ä½¿ç”¨åˆ—å­˜å‚¨æˆ–å‹ç¼©æ ¼å¼ï¼Œé™ä½å­˜å‚¨æˆæœ¬ã€‚
4. **åˆ†ç‰‡**ï¼š
    - è‹¥æ•°æ®é‡æŒç»­å¢é•¿ï¼Œå¯æŒ‰åˆ†å…¬å¸IDåˆ†ç‰‡å­˜å‚¨å®¢æˆ·ã€æ—…æ¸¸ä¿¡æ¯ç­‰è¡¨ï¼Œåˆ†å¸ƒå¼éƒ¨ç½²ã€‚
5. **ç¼“å­˜**ï¼š
    - å¯¹çƒ­é—¨çº¿è·¯å’Œé¢‘ç¹æŸ¥è¯¢çš„å®¢æˆ·ä¿¡æ¯ä½¿ç”¨å†…å­˜ç¼“å­˜ï¼ˆå¦‚Redisï¼‰ï¼Œå‡å°‘æ•°æ®åº“å‹åŠ›ã€‚

---

### **(6) ç”¨SQLå®ç°æ•°æ®åº“è®¾è®¡ï¼Œå¡«å……å®éªŒæ•°æ®**

#### **SQLå»ºè¡¨**
ä»¥ä¸‹ä¸ºä¸»è¦è¡¨çš„SQLå®šä¹‰ï¼ˆéƒ¨åˆ†ç¤ºä¾‹ï¼Œå®Œæ•´ä»£ç å¯æ‰©å±•ï¼‰ï¼š
```sql
-- å‘˜å·¥ (æš‚ä¸åŠ å¯¹åˆ†å…¬å¸çš„å¤–é”®)
CREATE TABLE å‘˜å·¥ (
                      å¯¼æ¸¸å· VARCHAR(10) PRIMARY KEY,
                      èº«ä»½è¯å· VARCHAR(18) UNIQUE NOT NULL,
                      å§“å VARCHAR(50) NOT NULL,
                      å¯¼æ¸¸èµ„æ ¼ç­‰çº§ ENUM('åˆçº§', 'ä¸­çº§', 'é«˜çº§') NOT NULL,
                      åˆ†å…¬å¸ID VARCHAR(10)
);

-- åˆ†å…¬å¸
CREATE TABLE åˆ†å…¬å¸ (
                        åˆ†å…¬å¸ID VARCHAR(10) PRIMARY KEY,
                        åç§° VARCHAR(50) NOT NULL,
                        åŠå…¬åœ°å€ VARCHAR(100),
                        ç»ç†ID VARCHAR(10),
                        FOREIGN KEY (ç»ç†ID) REFERENCES å‘˜å·¥(å¯¼æ¸¸å·)
);

-- åç»­æ·»åŠ å‘˜å·¥è¡¨å¯¹å¤–é”®çš„å¼•ç”¨
ALTER TABLE å‘˜å·¥
    ADD CONSTRAINT fk_åˆ†å…¬å¸ID FOREIGN KEY (åˆ†å…¬å¸ID) REFERENCES åˆ†å…¬å¸(åˆ†å…¬å¸ID);

-- æ—…æ¸¸çº¿è·¯
CREATE TABLE æ—…æ¸¸çº¿è·¯ (
                          çº¿è·¯ID VARCHAR(10) PRIMARY KEY,
                          åœ°ç‚¹ TEXT,
                          æ™¯ç‚¹ TEXT,
                          æ—¶é—´æ®µ VARCHAR(50),
                          ä»·æ ¼ DECIMAL(10,2),
                          äº¤é€šæ–¹å¼ VARCHAR(50),
                          æœåŠ¡ç­‰çº§ ENUM('æ ‡å‡†', 'é«˜çº§', 'è±ªå')
);

-- å®¢æˆ·
CREATE TABLE å®¢æˆ· (
                      å®¢æˆ·ID VARCHAR(10) PRIMARY KEY,
                      èº«ä»½è¯å· VARCHAR(18) UNIQUE NOT NULL,
                      å§“å VARCHAR(50) NOT NULL,
                      å·¥ä½œå•ä½ VARCHAR(100),
                      èŒä¸š VARCHAR(50)
);

-- åˆåŒ
CREATE TABLE åˆåŒ (
                      åˆåŒID VARCHAR(10) PRIMARY KEY,
                      ç‰ˆæœ¬å· VARCHAR(10),
                      çº¿è·¯ID VARCHAR(10),
                      å¯¼æ¸¸ID VARCHAR(10),
                      æœåŠ¡ç­‰çº§ ENUM('æ ‡å‡†', 'ä¸­çº§', 'é«˜çº§') NOT NULL,
                      ä¿é™©ä¿¡æ¯ VARCHAR(50),
                      è´¹ç”¨çº¦å®š DECIMAL(10,2),
                      æ—…æ¸¸æ—¶é—´ DATE,
                      FOREIGN KEY (çº¿è·¯ID) REFERENCES æ—…æ¸¸çº¿è·¯(çº¿è·¯ID),
                      FOREIGN KEY (å¯¼æ¸¸ID) REFERENCES å‘˜å·¥(å¯¼æ¸¸å·)
);

-- æ—…æ¸¸ä¿¡æ¯
CREATE TABLE æ—…æ¸¸ä¿¡æ¯ (
                          æ—…æ¸¸ID VARCHAR(10) PRIMARY KEY,
                          å®¢æˆ·ID VARCHAR(10),
                          çº¿è·¯ID VARCHAR(10),
                          æ—…æ¸¸æ—¶é—´ DATE,
                          è´¹ç”¨ DECIMAL(10,2),
                          ä¿é™© VARCHAR(50),
                          æœåŠ¡ç­‰çº§ ENUM('æ ‡å‡†', 'é«˜çº§', 'è±ªå'),
                          åˆåŒID VARCHAR(10),
                          FOREIGN KEY (å®¢æˆ·ID) REFERENCES å®¢æˆ·(å®¢æˆ·ID),
                          FOREIGN KEY (çº¿è·¯ID) REFERENCES æ—…æ¸¸çº¿è·¯(çº¿è·¯ID),
                          FOREIGN KEY (åˆåŒID) REFERENCES åˆåŒ(åˆåŒID)
);

-- æ—…æ¸¸å›¢
CREATE TABLE æ—…æ¸¸å›¢ (
                        æ—…æ¸¸å›¢ID VARCHAR(10) PRIMARY KEY,
                        å¯¼æ¸¸ID VARCHAR(10),
                        çº¿è·¯ID VARCHAR(10),
                        æ—…æ¸¸æ—¶é—´ DATE,
                        FOREIGN KEY (å¯¼æ¸¸ID) REFERENCES å‘˜å·¥(å¯¼æ¸¸å·),
                        FOREIGN KEY (çº¿è·¯ID) REFERENCES æ—…æ¸¸çº¿è·¯(çº¿è·¯ID)
);

-- æ—…æ¸¸å›¢_å®¢æˆ·
CREATE TABLE æ—…æ¸¸å›¢_å®¢æˆ· (
                             æ—…æ¸¸å›¢ID VARCHAR(10),
                             å®¢æˆ·ID VARCHAR(10),
                             PRIMARY KEY (æ—…æ¸¸å›¢ID, å®¢æˆ·ID),
                             FOREIGN KEY (æ—…æ¸¸å›¢ID) REFERENCES æ—…æ¸¸å›¢(æ—…æ¸¸å›¢ID),
                             FOREIGN KEY (å®¢æˆ·ID) REFERENCES å®¢æˆ·(å®¢æˆ·ID)
);

-- è´¢åŠ¡è´¦ç›®
CREATE TABLE è´¢åŠ¡è´¦ç›® (
                          è´¦ç›®ID VARCHAR(10) PRIMARY KEY,
                          ç±»å‹ ENUM('åˆ†ç±»è´¦', 'æ€»è´¦') NOT NULL,
                          ç»Ÿè®¡æœˆä»½ DATE NOT NULL,
                          å…³è”ID VARCHAR(10),
                          é‡‘é¢ DECIMAL(10,2)
);

```

#### **å®éªŒæ•°æ®**
- **å°è¡¨**ï¼ˆå¦‚åˆ†å…¬å¸ã€å‘˜å·¥ã€çº¿è·¯ï¼‰ï¼šæ’å…¥10+è¡Œã€‚
- **å¤§è¡¨**ï¼ˆå¦‚æ—…æ¸¸ä¿¡æ¯ã€åˆåŒã€æ—…æ¸¸å›¢_å®¢æˆ·ã€è´¢åŠ¡è´¦ç›®ï¼‰ï¼šæ’å…¥1000+è¡Œã€‚
  ä»¥ä¸‹ä¸ºç¤ºä¾‹æ’å…¥ï¼ˆä»¥åˆ†å…¬å¸å’Œæ—…æ¸¸ä¿¡æ¯ä¸ºä¾‹ï¼‰ï¼š
```sql
-- åˆ†å…¬å¸
INSERT INTO åˆ†å…¬å¸ VALUES
                       ('B001', 'ä¸Šæµ·åˆ†å…¬å¸', 'ä¸Šæµ·å¸‚å¾æ±‡åŒº', 'G001'),
                       ('B002', 'åŒ—äº¬åˆ†å…¬å¸', 'åŒ—äº¬å¸‚æœé˜³åŒº', 'G002'),
-- ... å…±10è¡Œ

-- æ—…æ¸¸ä¿¡æ¯ï¼ˆ1000è¡Œç¤ºä¾‹ï¼Œå®é™…ç”¨è„šæœ¬ç”Ÿæˆï¼‰
    INSERT INTO æ—…æ¸¸ä¿¡æ¯ VALUES
    ('T0001', 'C0001', 'L0001', '2025-06-01', 5000.00, 'æ„å¤–é™©', 'æ ‡å‡†', 'CT0001'),
                             ('T0002', 'C0002', 'L0002', '2025-06-02', 8000.00, 'åŒ»ç–—é™©', 'è±ªå', 'CT0002'),
-- ... å…±1000è¡Œ
```
**ç”Ÿæˆå¤§è¡¨æ•°æ®**ï¼š

- ä½¿ç”¨Pythonè„šæœ¬æˆ–SQLå­˜å‚¨è¿‡ç¨‹ç”Ÿæˆ1000+è¡Œæ•°æ®ï¼Œéšæœºåˆ†é…å®¢æˆ·IDã€çº¿è·¯IDã€æ—¥æœŸç­‰ã€‚
- ç¤ºä¾‹Pythonè„šæœ¬ï¼š
```python
import random
import sqlite3

conn = sqlite3.connect('tourism.db')
cursor = conn.cursor()

for i in range(1000):
    tid = f'T{str(i+1).zfill(4)}'
    cid = f'C{str(random.randint(1, 1000)).zfill(4)}'
    lid = f'L{str(random.randint(1, 100)).zfill(4)}'
    date = f'2025-{random.randint(1,12):02d}-{random.randint(1,28):02d}'
    fee = random.randint(2000, 10000)
    insurance = random.choice(['æ„å¤–é™©', 'åŒ»ç–—é™©'])
    level = random.choice(['æ ‡å‡†', 'é«˜çº§', 'è±ªå'])
    ctid = f'CT{str(i+1).zfill(4)}'
    cursor.execute('INSERT INTO æ—…æ¸¸ä¿¡æ¯ VALUES (?, ?, ?, ?, ?, ?, ?, ?)',
                   (tid, cid, lid, date, fee, insurance, level, ctid))

conn.commit()
conn.close()
```

#### **å®ç°**
- ä½¿ç”¨MySQLã€PostgreSQLç­‰æ•°æ®åº“ç³»ç»Ÿã€‚
- åˆ›å»ºæ•°æ®åº“`tourism_db`ï¼Œæ‰§è¡Œå»ºè¡¨SQLï¼Œæ’å…¥æ•°æ®ã€‚
- éªŒè¯æ•°æ®å®Œæ•´æ€§ï¼ˆå¦‚å¤–é”®çº¦æŸã€å”¯ä¸€æ€§ï¼‰ã€‚

---

### **(7) ç”¨SQLç»Ÿè®¡æ•°æ®ï¼Œå½¢æˆåˆ†ç±»è´¦å’Œæ€»è´¦**

#### **åˆ†ç±»è´¦**
- **çº¿è·¯æ”¶å…¥**ï¼š
```sql
SELECT çº¿è·¯ID, ç»Ÿè®¡æœˆä»½, SUM(é‡‘é¢) as æ”¶å…¥
FROM è´¢åŠ¡è´¦ç›®
WHERE ç±»å‹ = 'åˆ†ç±»è´¦' AND å…³è”ID IN (SELECT çº¿è·¯ID FROM æ—…æ¸¸çº¿è·¯)
GROUP BY çº¿è·¯ID, ç»Ÿè®¡æœˆä»½;
```
- **å®¢æˆ·æ¶ˆè´¹**ï¼š
```sql
SELECT å®¢æˆ·ID, ç»Ÿè®¡æœˆä»½, SUM(è´¹ç”¨) as æ¶ˆè´¹é‡‘é¢
FROM æ—…æ¸¸ä¿¡æ¯
         JOIN è´¢åŠ¡è´¦ç›® ON æ—…æ¸¸ä¿¡æ¯.æ—…æ¸¸ID = è´¢åŠ¡è´¦ç›®.å…³è”ID
WHERE è´¢åŠ¡è´¦ç›®.ç±»å‹ = 'åˆ†ç±»è´¦'
GROUP BY å®¢æˆ·ID, ç»Ÿè®¡æœˆä»½;
```
- **å¯¼æ¸¸ä¸šç»©**ï¼š
```sql
SELECT å¯¼æ¸¸ID, ç»Ÿè®¡æœˆä»½, SUM(é‡‘é¢) as ä¸šç»©é‡‘é¢
FROM è´¢åŠ¡è´¦ç›®
WHERE ç±»å‹ = 'åˆ†ç±»è´¦' AND å…³è”ID IN (SELECT å¯¼æ¸¸å· FROM å‘˜å·¥)
GROUP BY å¯¼æ¸¸ID, ç»Ÿè®¡æœˆä»½;
```

#### **æ€»è´¦**
- **åˆ†å…¬å¸é”€å”®ä¸šç»©**ï¼š
```sql
SELECT åˆ†å…¬å¸ID, ç»Ÿè®¡æœˆä»½, SUM(é‡‘é¢) as é”€å”®ä¸šç»©
FROM è´¢åŠ¡è´¦ç›®
WHERE ç±»å‹ = 'æ€»è´¦' AND å…³è”ID IN (SELECT åˆ†å…¬å¸ID FROM åˆ†å…¬å¸)
GROUP BY åˆ†å…¬å¸ID, ç»Ÿè®¡æœˆä»½;
```

#### **å®ç°**
- åˆ›å»ºè§†å›¾å­˜å‚¨ç»Ÿè®¡ç»“æœï¼š
```sql
CREATE VIEW çº¿è·¯æ”¶å…¥è§†å›¾ AS
SELECT çº¿è·¯ID, ç»Ÿè®¡æœˆä»½, SUM(é‡‘é¢) as æ”¶å…¥
FROM è´¢åŠ¡è´¦ç›®
WHERE ç±»å‹ = 'åˆ†ç±»è´¦' AND å…³è”ID IN (SELECT çº¿è·¯ID FROM æ—…æ¸¸çº¿è·¯)
GROUP BY çº¿è·¯ID, ç»Ÿè®¡æœˆä»½;
```
- æ¯æœˆè¿è¡Œè„šæœ¬æ›´æ–°è´¢åŠ¡è´¦ç›®è¡¨ï¼Œç¡®ä¿æ•°æ®å‡†ç¡®ã€‚



---

###  (8) é’ˆå¯¹æ¯ä¸ªå¯¼æ¸¸æ„å»ºç”¨æˆ·æŸ¥è¯¢è§†å›¾å’Œç›¸å…³ä¿¡æ¯æŸ¥è¯¢

#### ç›®æ ‡
ä¸ºæ¯ä½å¯¼æ¸¸åˆ›å»ºSQLè§†å›¾å’ŒæŸ¥è¯¢è¯­å¥ï¼Œä»¥ä¾¿ä»–ä»¬èƒ½å¤Ÿæ–¹ä¾¿åœ°è®¿é—®ä¸è‡ªå·±ç›¸å…³çš„ä¸ªæ€§åŒ–ä¿¡æ¯ï¼Œä¾‹å¦‚åˆ†é…çš„æ—…æ¸¸å›¢ã€å®¢æˆ·ã€åˆåŒå’Œä¸šç»©ç»Ÿè®¡ã€‚è¿™ç¡®ä¿å¯¼æ¸¸åªèƒ½è®¿é—®ä¸å…¶èŒè´£ç›¸å…³çš„æ•°æ®ï¼Œé¿å…æ¥è§¦æ— å…³æˆ–æ•æ„Ÿä¿¡æ¯ã€‚

#### ä¸ºæ¯ä½å¯¼æ¸¸æ„å»ºç”¨æˆ·æŸ¥è¯¢è§†å›¾

##### 1. è§†å›¾ï¼šå¯¼æ¸¸ä¸ªäººä¿¡æ¯
è¯¥è§†å›¾æä¾›å¯¼æ¸¸çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¯¼æ¸¸å·ã€å§“åã€èµ„æ ¼ç­‰çº§å’Œæ‰€å±åˆ†å…¬å¸ä¿¡æ¯ã€‚

```sql
CREATE VIEW å¯¼æ¸¸ä¸ªäººä¿¡æ¯è§†å›¾ AS
SELECT
    e.å¯¼æ¸¸å· AS å¯¼æ¸¸ID,
    e.å§“å AS å¯¼æ¸¸å§“å,
    e.å¯¼æ¸¸èµ„æ ¼ç­‰çº§ AS èµ„æ ¼ç­‰çº§,
    e.èº«ä»½è¯å· AS èº«ä»½è¯å·,
    b.åˆ†å…¬å¸ID AS åˆ†å…¬å¸ID,
    b.åç§° AS åˆ†å…¬å¸åç§°,
    b.åŠå…¬åœ°å€ AS åˆ†å…¬å¸åœ°å€
FROM å‘˜å·¥ e
         JOIN åˆ†å…¬å¸ b ON e.åˆ†å…¬å¸ID = b.åˆ†å…¬å¸ID;
```

- **ç”¨é€”**ï¼šå…è®¸å¯¼æ¸¸æŸ¥çœ‹è‡ªå·±çš„ä¸ªäººä¿¡æ¯å’Œæ‰€å±åˆ†å…¬å¸è¯¦æƒ…ã€‚
- **è®¿é—®æ–¹å¼**ï¼šå¯¼æ¸¸å¯é€šè¿‡è‡ªå·±çš„`å¯¼æ¸¸ID`æŸ¥è¯¢è¯¥è§†å›¾ã€‚

**ç¤ºä¾‹æŸ¥è¯¢**ï¼ˆé’ˆå¯¹ç‰¹å®šå¯¼æ¸¸ï¼‰ï¼š
```sql
SELECT * FROM å¯¼æ¸¸ä¸ªäººä¿¡æ¯è§†å›¾ WHERE å¯¼æ¸¸ID = 'G001';
```

##### 2. è§†å›¾ï¼šå¯¼æ¸¸æ—…æ¸¸å›¢
è¯¥è§†å›¾åˆ—å‡ºåˆ†é…ç»™å¯¼æ¸¸çš„æ‰€æœ‰æ—…æ¸¸å›¢ï¼ŒåŒ…æ‹¬æ—…æ¸¸å›¢è¯¦æƒ…å’Œç›¸å…³çº¿è·¯ä¿¡æ¯ã€‚

```sql
CREATE VIEW å¯¼æ¸¸æ—…æ¸¸å›¢è§†å›¾ AS
SELECT
    t.æ—…æ¸¸å›¢ID AS æ—…æ¸¸å›¢ID,
    t.å¯¼æ¸¸ID AS å¯¼æ¸¸ID,
    t.çº¿è·¯ID AS çº¿è·¯ID,
    l.åœ°ç‚¹ AS åœ°ç‚¹,
    l.æ™¯ç‚¹ AS æ™¯ç‚¹,
    t.æ—…æ¸¸æ—¶é—´ AS æ—…æ¸¸æ—¥æœŸ,
    l.æœåŠ¡ç­‰çº§ AS æœåŠ¡ç­‰çº§,
    l.ä»·æ ¼ AS ä»·æ ¼
FROM æ—…æ¸¸å›¢ t
         JOIN æ—…æ¸¸çº¿è·¯ l ON t.çº¿è·¯ID = l.çº¿è·¯ID;
```

- **ç”¨é€”**ï¼šå¸®åŠ©å¯¼æ¸¸æŸ¥çœ‹è‡ªå·±è´Ÿè´£çš„æ—…æ¸¸å›¢ï¼ŒåŒ…æ‹¬çº¿è·¯çš„åœ°ç‚¹ã€æ™¯ç‚¹ã€æ—¶é—´ç­‰ã€‚
- **è®¿é—®æ–¹å¼**ï¼šå¯¼æ¸¸é€šè¿‡`å¯¼æ¸¸ID`è¿‡æ»¤è‡ªå·±çš„æ—…æ¸¸å›¢ã€‚

**ç¤ºä¾‹æŸ¥è¯¢**ï¼š
```sql
SELECT * FROM å¯¼æ¸¸æ—…æ¸¸å›¢è§†å›¾ WHERE å¯¼æ¸¸ID = 'G001' AND æ—…æ¸¸æ—¥æœŸ >= '2024-01-01';
```

##### 3. è§†å›¾ï¼šå¯¼æ¸¸å®¢æˆ·åˆ—è¡¨
è¯¥è§†å›¾æ˜¾ç¤ºå¯¼æ¸¸è´Ÿè´£çš„æ—…æ¸¸å›¢ä¸­çš„å®¢æˆ·ä¿¡æ¯ã€‚

```sql
CREATE VIEW å¯¼æ¸¸å®¢æˆ·è§†å›¾ AS
SELECT
    t.æ—…æ¸¸å›¢ID AS æ—…æ¸¸å›¢ID,
    t.å¯¼æ¸¸ID AS å¯¼æ¸¸ID,
    tc.å®¢æˆ·ID AS å®¢æˆ·ID,
    c.å§“å AS å®¢æˆ·å§“å,
    c.èº«ä»½è¯å· AS å®¢æˆ·èº«ä»½è¯å·,
    c.èŒä¸š AS å®¢æˆ·èŒä¸š
FROM æ—…æ¸¸å›¢ t
         JOIN æ—…æ¸¸å›¢_å®¢æˆ· tc ON t.æ—…æ¸¸å›¢ID = tc.æ—…æ¸¸å›¢ID
         JOIN å®¢æˆ· c ON tc.å®¢æˆ·ID = c.å®¢æˆ·ID;
```

- **ç”¨é€”**ï¼šå…è®¸å¯¼æ¸¸æŸ¥çœ‹æ¯ä¸ªæ—…æ¸¸å›¢çš„å®¢æˆ·åˆ—è¡¨ï¼Œä¾¿äºç®¡ç†å›¢é˜Ÿã€‚
- **è®¿é—®æ–¹å¼**ï¼šé€šè¿‡`å¯¼æ¸¸ID`å’Œ`æ—…æ¸¸å›¢ID`æŸ¥è¯¢ã€‚

**ç¤ºä¾‹æŸ¥è¯¢**ï¼š
```sql
SELECT * FROM å¯¼æ¸¸å®¢æˆ·è§†å›¾ WHERE å¯¼æ¸¸ID = 'G001' AND æ—…æ¸¸å›¢ID = 'TG001';
```

##### 4. è§†å›¾ï¼šå¯¼æ¸¸åˆåŒä¿¡æ¯
è¯¥è§†å›¾æä¾›å¯¼æ¸¸è´Ÿè´£çš„æ—…æ¸¸åˆåŒä¿¡æ¯ã€‚

```sql
CREATE VIEW å¯¼æ¸¸åˆåŒè§†å›¾ AS
SELECT
    c.åˆåŒID AS åˆåŒID,
    c.å¯¼æ¸¸ID AS å¯¼æ¸¸ID,
    c.çº¿è·¯ID AS çº¿è·¯ID,
    l.åœ°ç‚¹ AS åœ°ç‚¹,
    c.æœåŠ¡ç­‰çº§ AS æœåŠ¡ç­‰çº§,
    c.ä¿é™©ä¿¡æ¯ AS ä¿é™©ä¿¡æ¯,
    c.è´¹ç”¨çº¦å®š AS è´¹ç”¨,
    c.æ—…æ¸¸æ—¶é—´ AS æ—…æ¸¸æ—¶é—´
FROM åˆåŒ c
         JOIN æ—…æ¸¸çº¿è·¯ l ON c.çº¿è·¯ID = l.çº¿è·¯ID;
```

- **ç”¨é€”**ï¼šå¯¼æ¸¸å¯ä»¥æŸ¥çœ‹è‡ªå·±è´Ÿè´£çš„åˆåŒè¯¦æƒ…ï¼ŒåŒ…æ‹¬è´¹ç”¨ã€æœåŠ¡ç­‰çº§å’Œä¿é™©ä¿¡æ¯ã€‚
- **è®¿é—®æ–¹å¼**ï¼šé€šè¿‡`å¯¼æ¸¸ID`è¿‡æ»¤ã€‚

**ç¤ºä¾‹æŸ¥è¯¢**ï¼š
```sql
SELECT * FROM å¯¼æ¸¸åˆåŒè§†å›¾ WHERE å¯¼æ¸¸ID = 'G001' AND æ—…æ¸¸æ—¶é—´ BETWEEN '2024-06-01' AND '2024-12-31';
```

##### 5. è§†å›¾ï¼šå¯¼æ¸¸ä¸šç»©ç»Ÿè®¡
è¯¥è§†å›¾æ±‡æ€»å¯¼æ¸¸çš„æœˆåº¦ä¸šç»©ï¼ˆåŸºäºè´¢åŠ¡è´¦ç›®ï¼‰ã€‚

```sql
CREATE VIEW å¯¼æ¸¸ä¸šç»©è§†å›¾ AS
SELECT
    f.å…³è”ID AS å¯¼æ¸¸ID,
    f.ç»Ÿè®¡æœˆä»½ AS ç»Ÿè®¡æœˆä»½,
    SUM(f.é‡‘é¢) AS ä¸šç»©é‡‘é¢
FROM è´¢åŠ¡è´¦ç›® f
WHERE f.ç±»å‹ = 'åˆ†ç±»è´¦' AND f.å…³è”ID IN (SELECT å¯¼æ¸¸å· FROM å‘˜å·¥)
GROUP BY f.å…³è”ID, f.ç»Ÿè®¡æœˆä»½;
```

- **ç”¨é€”**ï¼šå¯¼æ¸¸å¯ä»¥æŸ¥çœ‹è‡ªå·±çš„æœˆåº¦ä¸šç»©ï¼Œäº†è§£æ”¶å…¥è´¡çŒ®ã€‚
- **è®¿é—®æ–¹å¼**ï¼šé€šè¿‡`å¯¼æ¸¸ID`æŸ¥è¯¢ã€‚

**ç¤ºä¾‹æŸ¥è¯¢**ï¼š
```sql
SELECT * FROM å¯¼æ¸¸ä¸šç»©è§†å›¾ WHERE å¯¼æ¸¸ID = 'G001' AND ç»Ÿè®¡æœˆä»½ = '2024-06-01';
```

#### ç›¸å…³ä¿¡æ¯æŸ¥è¯¢

ä»¥ä¸‹æ˜¯ä¸€äº›å¯¼æ¸¸å¯èƒ½å¸¸ç”¨çš„æŸ¥è¯¢è¯­å¥ï¼ŒåŸºäºä¸Šè¿°è§†å›¾ï¼š

1. **æŸ¥è¯¢æœªæ¥ä¸€ä¸ªæœˆçš„æ—…æ¸¸å›¢å®‰æ’**ï¼š
```sql
SELECT æ—…æ¸¸å›¢ID, çº¿è·¯ID, åœ°ç‚¹, æ™¯ç‚¹, æ—…æ¸¸æ—¥æœŸ, æœåŠ¡ç­‰çº§
FROM å¯¼æ¸¸æ—…æ¸¸å›¢è§†å›¾
WHERE å¯¼æ¸¸ID = 'G001'
  AND æ—…æ¸¸æ—¥æœŸ BETWEEN CURDATE() AND DATE_ADD(CURDATE(), INTERVAL 1 MONTH);
```

2. **æŸ¥è¯¢æŸæ—…æ¸¸å›¢çš„å®¢æˆ·å’ŒåˆåŒä¿¡æ¯**ï¼š
```sql
SELECT g.æ—…æ¸¸å›¢ID, g.å®¢æˆ·ID, g.å®¢æˆ·å§“å, c.åˆåŒID, c.è´¹ç”¨, c.ä¿é™©ä¿¡æ¯
FROM å¯¼æ¸¸å®¢æˆ·è§†å›¾ g
         JOIN æ—…æ¸¸ä¿¡æ¯ ti ON g.å®¢æˆ·ID = ti.å®¢æˆ·ID
         JOIN å¯¼æ¸¸åˆåŒè§†å›¾ c ON ti.åˆåŒID = c.åˆåŒID
WHERE g.å¯¼æ¸¸ID = 'G001' AND g.æ—…æ¸¸å›¢ID = 'TG001';
```

3. **æŸ¥è¯¢å¹´åº¦ä¸šç»©æ±‡æ€»**ï¼š
```sql
SELECT ç»Ÿè®¡æœˆä»½, ä¸šç»©é‡‘é¢
FROM å¯¼æ¸¸ä¸šç»©è§†å›¾
WHERE å¯¼æ¸¸ID = 'G001' AND YEAR(ç»Ÿè®¡æœˆä»½) = 2024
ORDER BY ç»Ÿè®¡æœˆä»½;
```

#### æƒé™æ§åˆ¶
ä¸ºç¡®ä¿æ•°æ®å®‰å…¨ï¼Œå»ºè®®ä¸ºæ¯ä½å¯¼æ¸¸åˆ†é…æ•°æ®åº“ç”¨æˆ·è´¦æˆ·ï¼Œå¹¶é™åˆ¶è§†å›¾è®¿é—®æƒé™ï¼š
```sql
-- åˆ›å»ºå¯¼æ¸¸ç”¨æˆ·
CREATE USER 'guide_G001'@'localhost' IDENTIFIED BY 'password';

-- æˆäºˆè§†å›¾æŸ¥è¯¢æƒé™
GRANT SELECT ON tourism_db.å¯¼æ¸¸ä¸ªäººä¿¡æ¯è§†å›¾ TO 'guide_G001'@'localhost';
GRANT SELECT ON tourism_db.å¯¼æ¸¸æ—…æ¸¸å›¢è§†å›¾ TO 'guide_G001'@'localhost';
GRANT SELECT ON tourism_db.å¯¼æ¸¸å®¢æˆ·è§†å›¾ TO 'guide_G001'@'localhost';
GRANT SELECT ON tourism_db.å¯¼æ¸¸åˆåŒè§†å›¾ TO 'guide_G001'@'localhost';
GRANT SELECT ON tourism_db.å¯¼æ¸¸ä¸šç»©è§†å›¾ TO 'guide_G001'@'localhost';
```



---

###  (9) ç”¨JDBCå®ç°æ•°æ®åº“äº’è”ï¼Œå¹¶æ„é€ ä¼˜åŒ–åçš„æ“ä½œç•Œé¢



#### æŠ€æœ¯æ ˆ

- **æ•°æ®åº“**ï¼šMySQLï¼ˆæ•°æ®åº“åä¸º`tourism_db`ï¼‰ã€‚

- **ç¼–ç¨‹è¯­è¨€**ï¼šJava 22ï¼ˆä½¿ç”¨JavaFX 22æ„å»ºGUIï¼‰ã€‚

- **JDBCé©±åŠ¨**ï¼šMySQL Connector/J 8.0.30ã€‚

- **ä¾èµ–ç®¡ç†**ï¼šMavenï¼ˆç®€åŒ–åº“ç®¡ç†ï¼‰ã€‚

- **å¼€å‘ç¯å¢ƒ**ï¼šIntelliJ IDEA æˆ– Eclipseã€‚

- **é™„åŠ åº“**ï¼š
    - JavaFXï¼ˆUIæ¡†æ¶ï¼‰ã€‚
    - Apache Commons CSVï¼ˆå¯¼å‡ºCSVï¼‰ã€‚
    - BCryptï¼ˆå¯†ç åŠ å¯†ï¼‰ã€‚

- **æ“ä½œç³»ç»Ÿ**ï¼šè·¨å¹³å°ï¼ˆWindows/Linux/Macï¼‰ã€‚




#### é¡¹ç›®ç»“æ„

é¡¹ç›®åç§°ï¼š`Tour-guide-query-interface`

```
Tour-guide-query-interface/
â”œâ”€â”€ pom.xml                            # Mavené…ç½®æ–‡ä»¶ï¼Œå®šä¹‰ä¾èµ–å’Œæ„å»ºè§„åˆ™
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â””â”€â”€ com/yyc/TourGuideQueryInterface/
â”‚   â”‚   â”‚       â”œâ”€â”€ TourGuideQueryInterface.java  # ä¸»ç¨‹åºå…¥å£ï¼ˆJavaFX Applicationï¼‰
â”‚   â”‚   â”‚       â”œâ”€â”€ DatabaseConnection.java # æ•°æ®åº“è¿æ¥ç±»ï¼ˆHikariCPï¼‰
â”‚   â”‚   â”‚       â”œâ”€â”€ GuideModel.java        # æ•°æ®æ¨¡å‹ï¼ˆModelï¼Œå¤„ç†æ•°æ®åº“æ“ä½œï¼‰
â”‚   â”‚   â”‚       â”œâ”€â”€ LoginController.java   # ç™»å½•ç•Œé¢æ§åˆ¶å™¨
â”‚   â”‚   â”‚       â”œâ”€â”€ MainController.java    # ä¸»ç•Œé¢æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ com/yyc/TourGuideQueryInterface/
â”‚   â”‚       â”‚   â”œâ”€â”€ login.fxml             # ç™»å½•ç•Œé¢FXMLæ–‡ä»¶
â”‚   â”‚       â”‚   â”œâ”€â”€ main.fxml              # ä¸»ç•Œé¢FXMLæ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ light-theme.css            # æµ…è‰²ä¸»é¢˜CSSæ ·å¼
â”‚   â”‚       â”œâ”€â”€ dark-theme.css             # æ·±è‰²ä¸»é¢˜CSSæ ·å¼
â”‚   â”‚       â””â”€â”€ application.properties     # é…ç½®æ–‡ä»¶ï¼ˆæ•°æ®åº“è¿æ¥å‚æ•°ï¼‰
â”‚   â””â”€â”€ module-info.java
â””â”€â”€ README.md      # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```



#### å®ç°æ­¥éª¤

##### 1. é…ç½®JDBCå’ŒJavaFXç¯å¢ƒ
- **Mavenä¾èµ–**ï¼ˆ`pom.xml`ï¼‰ï¼š
  ```xml
  <project xmlns="http://maven.apache.org/POM/4.0.0"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  
      <!-- åŸºæœ¬é¡¹ç›®ä¿¡æ¯ -->
      <modelVersion>4.0.0</modelVersion>
      <groupId>com.example</groupId>
      <artifactId>Tour-guide-query-interface</artifactId>
      <version>1.0-SNAPSHOT</version>
  
      <!-- ä¾èµ–ç®¡ç† -->
      <dependencies>
          <!-- MySQL JDBC é©±åŠ¨ -->
          <dependency>
              <groupId>mysql</groupId>
              <artifactId>mysql-connector-java</artifactId>
              <version>8.0.30</version>
          </dependency>
          <!-- JavaFX -->
          <dependency>
              <groupId>org.openjfx</groupId>
              <artifactId>javafx-controls</artifactId>
              <version>22</version>
          </dependency>
          <dependency>
              <groupId>org.openjfx</groupId>
              <artifactId>javafx-fxml</artifactId>
              <version>22</version>
          </dependency>
          <!-- Apache Commons CSV -->
          <dependency>
              <groupId>org.apache.commons</groupId>
              <artifactId>commons-csv</artifactId>
              <version>1.10.0</version>
          </dependency>
          <!-- BCrypt å¯†ç åŠ å¯† -->
          <dependency>
              <groupId>org.mindrot</groupId>
              <artifactId>jbcrypt</artifactId>
              <version>0.4</version>
          </dependency>
          <dependency>
              <groupId>com.zaxxer</groupId>
              <artifactId>HikariCP</artifactId>
              <version>5.1.0</version>
          </dependency>
      </dependencies>
  
      <!-- æ„å»ºé…ç½® -->
      <build>
          <plugins>
              <plugin>
                  <groupId>org.apache.maven.plugins</groupId>
                  <artifactId>maven-compiler-plugin</artifactId>
                  <version>3.8.1</version>
                  <configuration>
                      <source>9</source>
                      <target>9</target>
                  </configuration>
              </plugin>
          </plugins>
      </build>
  </project>
  
  ```
- **JavaFXé…ç½®**ï¼š

    - åœ¨`module-info.java`ä¸­æ·»åŠ ï¼š
      ```java
      module travel.system {
          requires javafx.controls;
          requires javafx.fxml;
          requires java.sql;
          requires org.apache.commons.csv;
          requires jbcrypt;
          requires com.zaxxer.hikari;
          opens com.yyc.TourGuideQueryInterface to javafx.fxml;
          exports com.yyc.TourGuideQueryInterface;
      }
      ```
- **æ•°æ®åº“å‡†å¤‡**ï¼š
    - ç¡®ä¿`tourism_db`æ•°æ®åº“å·²åˆ›å»ºï¼ŒåŒ…å«æ‰€æœ‰è¡¨å’Œè§†å›¾ã€‚
    - åˆ›å»ºå¯¼æ¸¸ç”¨æˆ·è´¦æˆ·å¹¶åˆ†é…è§†å›¾æƒé™ã€‚
    - æ·»åŠ ç”¨æˆ·è®¤è¯è¡¨ï¼š
      ```sql
      CREATE TABLE å¯¼æ¸¸ç”¨æˆ· (
          å¯¼æ¸¸ID VARCHAR(10) PRIMARY KEY,
          å¯†ç å“ˆå¸Œ VARCHAR(60) NOT NULL,
          FOREIGN KEY (å¯¼æ¸¸ID) REFERENCES å‘˜å·¥(å¯¼æ¸¸å·)
      );
      -- ç¤ºä¾‹ç”¨æˆ·ï¼ˆå¯†ç ä½¿ç”¨BCryptåŠ å¯†ï¼‰
      INSERT INTO å¯¼æ¸¸ç”¨æˆ· (å¯¼æ¸¸ID, å¯†ç å“ˆå¸Œ) 
      VALUES ('G001', '$2a$10$r2jl/Km0t0piq5rlRl6SNe0RBDRqP0DXYfG7Hs8wJ9ZWSR0KFS7D6');
      ```



##### 2. ä¼˜åŒ–åçš„JDBCè¿æ¥

ä½¿ç”¨è¿æ¥æ± ï¼ˆHikariCPï¼‰æé«˜æ€§èƒ½ï¼Œæ·»åŠ é”™è¯¯å¤„ç†å’Œé…ç½®å¤–éƒ¨åŒ–ã€‚
DatabaseConnection.java

```java
package com.yyc.TourGuideQueryInterface;

import com.zaxxer.hikari.HikariConfig;
import com.zaxxer.hikari.HikariDataSource;

import java.sql.Connection;
import java.sql.SQLException;

public class DatabaseConnection {
    private static final HikariDataSource dataSource;

    static {
        HikariConfig config = new HikariConfig();
        config.setJdbcUrl("jdbc:mysql://localhost:3306/tourism_db");
        config.setUsername("root");
        config.setPassword("123456");
        config.setMaximumPoolSize(10);
        config.setMinimumIdle(5);
        config.addDataSourceProperty("cachePrepStmts", "true");
        dataSource = new HikariDataSource(config);
    }

    public static Connection getConnection() throws SQLException {
        return dataSource.getConnection();
    }

    public static void close() {
        if (dataSource != null) {
            dataSource.close();
        }
    }
}
```



##### 3. MVCæ¶æ„è®¾è®¡

å°†ç¨‹åºåˆ†ä¸ºæ¨¡å‹ï¼ˆModelï¼‰ã€è§†å›¾ï¼ˆViewï¼‰å’Œæ§åˆ¶å™¨ï¼ˆControllerï¼‰ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§ã€‚

- **Model**ï¼šå¤„ç†æ•°æ®é€»è¾‘ï¼ˆå¦‚æŸ¥è¯¢æ•°æ®åº“ï¼‰ã€‚
- **View**ï¼šJavaFX FXMLæ–‡ä»¶å®šä¹‰ç•Œé¢ã€‚
- **Controller**ï¼šå¤„ç†ç”¨æˆ·äº¤äº’å’Œä¸šåŠ¡é€»è¾‘ã€‚



##### 4. JavaFXç•Œé¢è®¾è®¡

ä½¿ç”¨FXMLå®šä¹‰ç•Œé¢å¸ƒå±€ï¼ŒåŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š
- **ç™»å½•ç•Œé¢**ï¼šå¯¼æ¸¸IDè¾“å…¥æ¡†ã€å¯†ç è¾“å…¥æ¡†ã€ç™»å½•æŒ‰é’®ã€ä¸»é¢˜åˆ‡æ¢ä¸‹æ‹‰æ¡†ã€‚
- **ä¸»ç•Œé¢**ï¼š
    - ä¾§è¾¹æ ï¼šå¯¼èˆªæŒ‰é’®ï¼ˆä¸ªäººä¿¡æ¯ã€æ—…æ¸¸å›¢ã€å®¢æˆ·ã€åˆåŒã€ä¸šç»©ï¼‰ã€‚
    - å·¥å…·æ ï¼šæ—¥æœŸèŒƒå›´é€‰æ‹©å™¨ã€å¯¼å‡ºCSVæŒ‰é’®ã€‚
    - å†…å®¹åŒºåŸŸï¼šè¡¨æ ¼æ˜¾ç¤ºæŸ¥è¯¢ç»“æœï¼Œæ”¯æŒåˆ†é¡µã€‚
    - çŠ¶æ€æ ï¼šæ˜¾ç¤ºé”™è¯¯æˆ–æˆåŠŸæç¤ºã€‚

**FXMLæ–‡ä»¶**ï¼ˆ`main.fxml`ï¼‰ï¼š
```xml
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane fx:id="mainPane"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.yyc.TourGuideQueryInterface.MainController"
            style="-fx-background-color: #f4f4f4;">

    <!-- é¡¶éƒ¨å·¥å…·æ  -->
    <top>
        <HBox spacing="15"
              style="-fx-padding: 10; -fx-background-color: #ffffff; -fx-border-color: #ddd;">
            <Label text="æ—¥æœŸèŒƒå›´ï¼š" style="-fx-font-weight: bold;" />
            <DatePicker fx:id="startDatePicker" />
            <Label text="è‡³" style="-fx-font-weight: bold;" />
            <DatePicker fx:id="endDatePicker" />
            <Button fx:id="exportButton"
                    text="å¯¼å‡ºCSV"
                    style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-cursor: hand;"
                    onAction="#exportToCSV" />

            <ComboBox fx:id="themeCombo"
                      promptText="é€‰æ‹©ä¸»é¢˜"
                      style="-fx-pref-width: 120;" />
        </HBox>
    </top>

    <!-- å·¦ä¾§å¯¼èˆª -->
    <left>
        <VBox spacing="10"
              style="-fx-padding: 15; -fx-background-color: #ffffff; -fx-border-color: #ddd;">
            <Label text="å¯¼èˆªèœå•" style="-fx-font-size: 16px; -fx-font-weight: bold;" />
            <Separator />

            <Button fx:id="profileButton"
                    text="ğŸ‘¤ ä¸ªäººä¿¡æ¯"
                    prefWidth="200"
                    onAction="#queryProfile"
                    style="-fx-background-color: #007bff; -fx-text-fill: white; -fx-cursor: hand;" />

            <Button fx:id="tourGroupButton"
                    text="&#x1F6C5; æ—…æ¸¸å›¢"
                    prefWidth="200"
                    onAction="#queryTourGroups"
                    style="-fx-background-color: #17a2b8; -fx-text-fill: white; -fx-cursor: hand;" />

            <Button fx:id="clientButton"
                    text="ğŸ‘¥ å®¢æˆ·"
                    prefWidth="200"
                    onAction="#queryClients"
                    style="-fx-background-color: #ffc107; -fx-text-fill: black; -fx-cursor: hand;" />

            <Button fx:id="contractButton"
                    text="ğŸ“„ åˆåŒ"
                    prefWidth="200"
                    onAction="#queryContracts"
                    style="-fx-background-color: #dc3545; -fx-text-fill: white; -fx-cursor: hand;" />

            <Button fx:id="performanceButton"
                    text="ğŸ“ˆ ä¸šç»©"
                    prefWidth="200"
                    onAction="#queryPerformance"
                    style="-fx-background-color: #6610f2; -fx-text-fill: white; -fx-cursor: hand;" />
        </VBox>
    </left>

    <!-- ä¸­å¿ƒå†…å®¹ -->
    <center>
        <VBox spacing="10" style="-fx-padding: 10;">
            <HBox spacing="10">
                <Label text="çŠ¶æ€ï¼š" />
                <Label fx:id="statusLabel" style="-fx-text-fill: #007bff;" />
            </HBox>

            <TableView fx:id="resultTable" style="-fx-table-cell-border-color: #ccc;">
                <placeholder>
                    <Label text="è¯·ç‚¹å‡»å·¦ä¾§æŒ‰é’®è¿›è¡ŒæŸ¥è¯¢" style="-fx-font-style: italic; -fx-text-fill: gray;" />
                </placeholder>
            </TableView>
        </VBox>
    </center>

    <!-- åº•éƒ¨çŠ¶æ€æ  -->
    <bottom>
        <HBox alignment="CENTER"
              style="-fx-background-color: #e9ecef; -fx-padding: 10;">
            <Label text="Â© 2025 å¯¼æ¸¸æŸ¥è¯¢ç³»ç»Ÿ" style="-fx-text-fill: #6c757d;" />
        </HBox>
    </bottom>
</BorderPane>

```

**ç™»å½•ç•Œé¢FXML**ï¼ˆ`login.fxml`ï¼‰ï¼š
```xml
<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.yyc.TourGuideQueryInterface.LoginController"
            style="-fx-background-color: #f9f9f9;"
            prefWidth="400"
            prefHeight="350">

    <!-- ä¸­å¤®å†…å®¹ -->
    <center>
        <VBox alignment="CENTER"
              spacing="20"
              style="-fx-padding: 40px;">
            <!-- Logo or Title -->
            <Label text="&#x1F3E0; å¯¼æ¸¸æŸ¥è¯¢ç³»ç»Ÿ"
                   style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #333;" />

            <!-- ID è¾“å…¥ -->
            <HBox spacing="1" alignment="CENTER">
                <Label text="&#x1F464; å¯¼æ¸¸ID:" style="-fx-min-width: 80px;" />
                <TextField fx:id="guideIdField" promptText="è¾“å…¥å¯¼æ¸¸ID" style="-fx-pref-width: 200px;" />
            </HBox>

            <!-- å¯†ç è¾“å…¥ -->
            <HBox spacing="1" alignment="CENTER">
                <Label text="&#x1F510; å¯†ç :" style="-fx-min-width: 80px;" />
                <PasswordField fx:id="passwordField" promptText="è¾“å…¥å¯†ç " style="-fx-pref-width: 200px;" />
            </HBox>

            <!-- ç™»å½•æŒ‰é’® -->
            <Button fx:id="loginButton"
                    text="ç™»å½•"
                    onAction="#handleLogin"
                    style="-fx-background-color: #007BFF; -fx-text-fill: white; -fx-font-weight: bold; -fx-pref-width: 100px;" />

            <!-- é”™è¯¯æç¤º -->
            <Label fx:id="errorLabel"
                   text=""
                   style="-fx-text-fill: red; -fx-font-size: 14px;"
                   prefHeight="20" />
        </VBox>
    </center>

    <!-- åº•éƒ¨çŠ¶æ€æ  -->
    <bottom>
        <HBox alignment="CENTER"
              style="-fx-background-color: #e9ecef; -fx-padding: 10;">
            <Label text="Â© 2025 å¯¼æ¸¸æŸ¥è¯¢ç³»ç»Ÿ" style="-fx-text-fill: #6c757d;" />
        </HBox>
    </bottom>

</BorderPane>

```



##### 5. Javaä»£ç 

ä»¥ä¸‹æ˜¯ä¸»è¦ç±»çš„å®ç°ï¼Œé‡‡ç”¨MVCæ¨¡å¼ã€‚

**æ¨¡å‹ï¼ˆGuideModelï¼‰**ï¼š

```java
package com.yyc.TourGuideQueryInterface;

import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVPrinter;
import org.mindrot.jbcrypt.BCrypt;

import java.io.FileWriter;
import java.sql.*;
import java.time.LocalDate;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class GuideModel {
    // éªŒè¯å¯¼æ¸¸ç™»å½•
    public boolean authenticate(String guideId, String password) throws SQLException {
        try (Connection conn = DatabaseConnection.getConnection();
             PreparedStatement stmt = conn.prepareStatement("SELECT å¯†ç å“ˆå¸Œ FROM å¯¼æ¸¸ç”¨æˆ· WHERE å¯¼æ¸¸ID = ?")) {

            stmt.setString(1, guideId);
            ResultSet rs = stmt.executeQuery();
            if (rs.next()) {
                String hashedPassword = rs.getString("å¯†ç å“ˆå¸Œ");
                return BCrypt.checkpw(password, hashedPassword);
            }
            return false;
        }
    }

    // é€šç”¨æŸ¥è¯¢æ–¹æ³•ï¼ˆæ”¯æŒæ—¥æœŸè¿‡æ»¤ï¼‰
    public List<Map<String, Object>> query(String viewName, String guideId, LocalDate startDate, LocalDate endDate) throws SQLException {
        // ç™½åå•æ ¡éªŒè§†å›¾åç§°
        if (!isValidViewName(viewName)) {
            throw new IllegalArgumentException("ä¸å…è®¸æŸ¥è¯¢çš„è§†å›¾: " + viewName);
        }

        StringBuilder sql = new StringBuilder("SELECT * FROM ").append(viewName).append(" WHERE å¯¼æ¸¸ID = ?");
        if (startDate != null && endDate != null) {
            sql.append(" AND æ—…æ¸¸æ—¥æœŸ BETWEEN ? AND ?");
        }

        try (Connection conn = DatabaseConnection.getConnection();
             PreparedStatement stmt = conn.prepareStatement(sql.toString())) {

            stmt.setString(1, guideId);
            if (startDate != null && endDate != null) {
                stmt.setDate(2, Date.valueOf(startDate));
                stmt.setDate(3, Date.valueOf(endDate));
            }

            try (ResultSet rs = stmt.executeQuery()) {
                ResultSetMetaData metaData = rs.getMetaData();
                int columnCount = metaData.getColumnCount();
                List<Map<String, Object>> result = new ArrayList<>();

                while (rs.next()) {
                    Map<String, Object> row = new HashMap<>();
                    for (int i = 1; i <= columnCount; i++) {
                        row.put(metaData.getColumnName(i), rs.getObject(i));
                    }
                    result.add(row);
                }

                return result;
            }
        }
    }

    // ç™½åå•éªŒè¯æ–¹æ³•
    private boolean isValidViewName(String viewName) {
        List<String> allowedViews = List.of("å¯¼æ¸¸ä¸šç»©è§†å›¾", "å¯¼æ¸¸ä¸ªäººä¿¡æ¯è§†å›¾", "å¯¼æ¸¸åˆåŒè§†å›¾", "å¯¼æ¸¸å®¢æˆ·è§†å›¾", "å¯¼æ¸¸æ—…æ¸¸å›¢è§†å›¾"); // å…è®¸çš„è§†å›¾åˆ—è¡¨
        return allowedViews.contains(viewName);
    }


    // å¯¼å‡ºæŸ¥è¯¢ç»“æœä¸ºCSV
    public void exportToCSV(List<Map<String, Object>> data, String filePath) throws Exception {
        if (data == null || data.isEmpty()) {
            throw new IllegalArgumentException("æ²¡æœ‰å¯å¯¼å‡ºçš„æ•°æ®");
        }

        List<String> headers = new ArrayList<>(data.get(0).keySet());

        try (CSVPrinter printer = new CSVPrinter(new FileWriter(filePath), CSVFormat.DEFAULT.withHeader(headers.toArray(new String[0])))) {
            for (Map<String, Object> row : data) {
                List<Object> rowData = new ArrayList<>();
                for (String col : headers) {
                    rowData.add(row.get(col));
                }
                printer.printRecord(rowData);
            }
        }
    }
}

```

**ç™»å½•æ§åˆ¶å™¨ï¼ˆLoginControllerï¼‰**ï¼š

```java
package com.yyc.TourGuideQueryInterface;

import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.PasswordField;
import javafx.scene.control.TextField;
import javafx.stage.Stage;
import java.util.logging.Logger;

public class LoginController {
    private static final Logger logger = Logger.getLogger(LoginController.class.getName());
    @FXML
    public Button loginButton;
    @FXML
    private TextField guideIdField;
    @FXML
    private PasswordField passwordField;
    @FXML
    private Label errorLabel;

    private final GuideModel model = new GuideModel();

    @FXML
    private void handleLogin() {
        String guideId = guideIdField.getText();
        String password = passwordField.getText();

        try {
            if (model.authenticate(guideId, password)) {
                // åŠ è½½ä¸»ç•Œé¢
                FXMLLoader loader = new FXMLLoader(getClass().getResource("/com/yyc/TourGuideQueryInterface/main.fxml"));
                Parent root = loader.load();
                MainController mainController = loader.getController();
                mainController.setGuideId(guideId);

                Stage stage = (Stage) guideIdField.getScene().getWindow();
                stage.setScene(new Scene(root));
                stage.setTitle("å¯¼æ¸¸æŸ¥è¯¢ç³»ç»Ÿ - ä¸»ç•Œé¢");
            } else {
                logger.warning("ç™»å½•å¤±è´¥ï¼šå¯¼æ¸¸IDæˆ–å¯†ç é”™è¯¯");
                errorLabel.setText("å¯¼æ¸¸IDæˆ–å¯†ç é”™è¯¯ï¼");
            }
        } catch (Exception e) {
            logger.severe("ç™»å½•è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸: " + e.getMessage());
            errorLabel.setText("ç™»å½•å¤±è´¥ï¼š" + e.getMessage());        }
    }
}
```

**ä¸»æ§åˆ¶å™¨ï¼ˆMainControllerï¼‰**ï¼š
```java
package com.yyc.TourGuideQueryInterface;

import javafx.application.Platform;
import javafx.beans.property.SimpleStringProperty;
import javafx.collections.FXCollections;
import javafx.fxml.FXML;
import javafx.scene.control.*;
import javafx.scene.layout.BorderPane;
import javafx.stage.FileChooser;

import java.time.LocalDate;
import java.util.List;
import java.util.Map;
import java.util.Objects;
import java.util.logging.Logger;

public class MainController {
    // æ·»åŠ æ—¥å¿—è®°å½•å™¨
    private static final Logger logger = Logger.getLogger(MainController.class.getName());

    @FXML
    public Button profileButton;
    @FXML
    public Button tourGroupButton;
    @FXML
    public Button clientButton;
    @FXML
    public Button contractButton;
    @FXML
    public Button performanceButton;
    @FXML
    private TableView<Map<String, Object>> resultTable;
    @FXML
    private DatePicker startDatePicker;
    @FXML
    private DatePicker endDatePicker;
    @FXML
    private Button exportButton;
    @FXML
    private ComboBox<String> themeCombo;
    @FXML
    private Label statusLabel;

    private String guideId;
    private final GuideModel model = new GuideModel();

    @FXML
    private void initialize() {
        // åˆå§‹åŒ–ä¸»é¢˜ä¸‹æ‹‰æ¡†
        themeCombo.setItems(FXCollections.observableArrayList("æµ…è‰²ä¸»é¢˜", "æ·±è‰²ä¸»é¢˜"));
        themeCombo.setOnAction(e -> switchTheme(themeCombo.getValue()));

        // å¯¼å‡ºæŒ‰é’®
        exportButton.setOnAction(e -> exportToCSV());
    }

    public void setGuideId(String guideId) {
        this.guideId = guideId;
    }

    @FXML
    private void queryProfile() {
        query("å¯¼æ¸¸ä¸ªäººä¿¡æ¯è§†å›¾", null, null);
    }

    @FXML
    private void queryTourGroups() {
        query("å¯¼æ¸¸æ—…æ¸¸å›¢è§†å›¾", startDatePicker.getValue(), endDatePicker.getValue());
    }

    @FXML
    private void queryClients() {
        query("å¯¼æ¸¸å®¢æˆ·è§†å›¾", startDatePicker.getValue(), endDatePicker.getValue());
    }

    @FXML
    private void queryContracts() {
        query("å¯¼æ¸¸åˆåŒè§†å›¾", startDatePicker.getValue(), endDatePicker.getValue());
    }

    @FXML
    private void queryPerformance() {
        query("å¯¼æ¸¸ä¸šç»©è§†å›¾", startDatePicker.getValue(), endDatePicker.getValue());
    }

    private void query(String viewName, LocalDate startDate, LocalDate endDate) {
        try {
            List<Map<String, Object>> data = model.query(viewName, guideId, startDate, endDate);

            resultTable.getColumns().clear();
            resultTable.getItems().clear();

            if (!data.isEmpty()) {
                // åŠ¨æ€åˆ›å»ºåˆ—
                Map<String, Object> firstRow = data.get(0);
                for (String colName : firstRow.keySet()) {
                    TableColumn<Map<String, Object>, String> col = new TableColumn<>(colName);
                    final String name = colName;
                    col.setCellValueFactory(cellData -> new SimpleStringProperty(
                            cellData.getValue().get(name) != null ? cellData.getValue().get(name).toString() : ""));
                    resultTable.getColumns().add(col);
                }

                // æ·»åŠ æ•°æ®
                resultTable.getItems().addAll(data);
                statusLabel.setText("æŸ¥è¯¢æˆåŠŸï¼Œå…± " + data.size() + " æ¡è®°å½•");
            } else {
                statusLabel.setText("æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æ•°æ®");
            }
        } catch (Exception e) {
            statusLabel.setText("æŸ¥è¯¢å¤±è´¥ï¼š" + e.getMessage());
            logger.severe("æŸ¥è¯¢è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸: " + e.getMessage());  // æ›¿æ¢ä¸ºæ—¥å¿—è®°å½•
            logger.throwing(MainController.class.getName(), "query", e); // å¯é€‰ï¼šè®°å½•å¼‚å¸¸å †æ ˆ
        }
    }


    @FXML
    private void exportToCSV() {
        FileChooser fileChooser = new FileChooser();
        fileChooser.setTitle("ä¿å­˜CSVæ–‡ä»¶");
        fileChooser.getExtensionFilters().add(new FileChooser.ExtensionFilter("CSVæ–‡ä»¶", "*.csv"));
        java.io.File file = fileChooser.showSaveDialog(resultTable.getScene().getWindow());

        if (file != null) {
            new Thread(() -> {
                try {
                    // è·å–å½“å‰è¡¨æ ¼åˆ—åä½œä¸ºè§†å›¾åç§°ï¼ˆæˆ–ä»ä¸Šä¸‹æ–‡å–ï¼‰
                    String viewName = resultTable.getColumns().get(0).getText();

                    // æŸ¥è¯¢æ•°æ®ï¼ˆæ”¹ç”¨ List<Map<String, Object>>ï¼‰
                    List<Map<String, Object>> data = model.query(
                            viewName,
                            guideId,
                            startDatePicker.getValue(),
                            endDatePicker.getValue()
                    );

                    // å¯¼å‡ºä¸º CSV
                    model.exportToCSV(data, file.getAbsolutePath());

                    // æ›´æ–° UI çŠ¶æ€
                    Platform.runLater(() -> statusLabel.setText("å¯¼å‡ºæˆåŠŸï¼š" + file.getAbsolutePath()));

                } catch (Exception e) {
                    Platform.runLater(() -> statusLabel.setText("å¯¼å‡ºå¤±è´¥ï¼š" + e.getMessage()));
                    logger.warning("å¯¼å‡ºè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸: " + e.getMessage());  // æ›¿æ¢ä¸ºæ—¥å¿—è®°å½•
                    logger.throwing(MainController.class.getName(), "exportToCSV", e); // å¯é€‰ï¼šè®°å½•å¼‚å¸¸å †æ ˆ
                }
            }).start();
        }
    }


    @FXML
    private BorderPane mainPane;
    private void switchTheme(String theme) {
        String css = theme.equals("æ·±è‰²ä¸»é¢˜") ?
                Objects.requireNonNull(getClass().getResource("/dark-theme.css")).toExternalForm() :
                Objects.requireNonNull(getClass().getResource("/light-theme.css")).toExternalForm();
        mainPane.getScene().getStylesheets().clear();
        mainPane.getScene().getStylesheets().add(css);
        statusLabel.setText("å·²åˆ‡æ¢è‡³ " + theme);
    }
}
```

**ä¸»ç¨‹åºï¼ˆTourGuideQueryInterfaceï¼‰**ï¼š

```java
package com.yyc.TourGuideQueryInterface;

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.image.Image;
import javafx.stage.Stage;

import java.util.Objects;

public class TourGuideQueryInterface extends Application {
    @Override
    public void start(Stage primaryStage) throws Exception {
        FXMLLoader loader = new FXMLLoader(getClass().getResource("/com/yyc/TourGuideQueryInterface/login.fxml"));

        Parent root = loader.load();
        primaryStage.setTitle("å¯¼æ¸¸æŸ¥è¯¢ç³»ç»Ÿ - ç™»å½•");
        primaryStage.getIcons().add(new Image(Objects.requireNonNull(getClass().getResourceAsStream("/icons/Guide.png"))));

        primaryStage.setScene(new Scene(root, 400, 400));
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}

```

**CSSæ ·å¼**ï¼ˆ`light-theme.css` å’Œ `dark-theme.css` ç¤ºä¾‹ï¼‰ï¼š
```css
/* light-theme.css */
.root {
    -fx-background-color: #f4f4f4;
    -fx-font-family: "Arial";
}
.button {
    -fx-background-color: #4CAF50;
    -fx-text-fill: white;
}
.table-view {
    -fx-background-color: white;
}

/* dark-theme.css */
.root {
    -fx-background-color: #333;
    -fx-font-family: "Arial";
}
.button {
    -fx-background-color: #666;
    -fx-text-fill: white;
}
.table-view {
    -fx-background-color: #444;
}
```



##### 6. è¿è¡Œä¸è°ƒè¯•
- **è¿è¡Œç¯å¢ƒ**ï¼š
    - JDK 22ï¼ŒJavaFX 22ï¼ŒMySQL 8.0ã€‚
    - é…ç½®Mavené¡¹ç›®ï¼Œä¸‹è½½æ‰€æœ‰ä¾èµ–ã€‚
    - ç¡®ä¿`tourism_db`æ•°æ®åº“è¿è¡Œï¼Œå¯¼æ¸¸ç”¨æˆ·è¡¨å·²åˆå§‹åŒ–ã€‚
- **è°ƒè¯•**ï¼š
    - éªŒè¯JDBCè¿æ¥ï¼ˆæ£€æŸ¥URLã€ç”¨æˆ·åã€å¯†ç ï¼‰ã€‚
    - æµ‹è¯•ç™»å½•è®¤è¯ï¼ˆç¡®ä¿BCryptå¯†ç åŒ¹é…ï¼‰ã€‚
    - æ£€æŸ¥æŸ¥è¯¢ç»“æœï¼ˆéªŒè¯è§†å›¾æ•°æ®å’Œæ—¥æœŸè¿‡æ»¤ï¼‰ã€‚
    - æµ‹è¯•CSVå¯¼å‡ºï¼ˆç¡®ä¿æ–‡ä»¶ç”Ÿæˆä¸”å†…å®¹æ­£ç¡®ï¼‰ã€‚
- **é”™è¯¯å¤„ç†**ï¼š
    - æ•è·SQLå¼‚å¸¸ã€IOå¼‚å¸¸ï¼Œæ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„æç¤ºã€‚
    - å¤„ç†ç©ºç»“æœé›†ï¼Œæ˜¾ç¤ºâ€œæ— æ•°æ®â€æç¤ºã€‚

##### 7. éƒ¨ç½²
- **æ‰“åŒ…**ï¼š
    - ä½¿ç”¨Mavenæ‰“åŒ…ä¸ºå¯æ‰§è¡ŒJARï¼ŒåŒ…å«JavaFXå’Œæ‰€æœ‰ä¾èµ–ã€‚
    - ç¤ºä¾‹å‘½ä»¤ï¼š`mvn clean package`.
    - ç”Ÿæˆ`guide-query-system.jar`ã€‚
- **åˆ†å‘**ï¼š
    - æä¾›å®‰è£…æŒ‡å—ï¼Œè¦æ±‚ç”¨æˆ·å®‰è£…JRE 17å’ŒMySQLã€‚
    - åŒ…å«æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼ˆå»ºè¡¨ã€è§†å›¾ã€ç”¨æˆ·ï¼‰ã€‚
- **è·¨å¹³å°æµ‹è¯•**ï¼š
    - åœ¨Windowsã€Linuxã€Macä¸Šæµ‹è¯•ï¼Œç¡®ä¿JavaFXå…¼å®¹æ€§ã€‚


---



### **è€ƒæ ¸è¦æ±‚æ‰§è¡Œå»ºè®®**
1. **å®éªŒæŠ¥å‘Š**ï¼š
    - ä½¿ç”¨ç»Ÿä¸€æ¨¡æ¿ï¼ŒåŒ…å«å°é¢ã€ç›®å½•ã€å®éªŒç›®æ ‡ã€è®¾è®¡è¿‡ç¨‹ã€ç»“æœåˆ†æã€æ€»ç»“ã€‚
    - æè¿°æ¯ä¸ªæˆå‘˜åˆ†å·¥ï¼ˆå¦‚æ•°æ®å»ºæ¨¡ã€SQLå®ç°ã€ç•Œé¢å¼€å‘ï¼‰ã€‚
2. **å°ç»„åˆ†å·¥**ï¼š
    - ç»„é•¿ï¼šåè°ƒä»»åŠ¡ï¼Œæ’°å†™ç»¼åˆæŠ¥å‘Šã€‚
    - ç»„å‘˜ï¼šåˆ†æ‹…å»ºæ¨¡ã€SQLã€æ•°æ®ç”Ÿæˆã€ç•Œé¢å¼€å‘ç­‰ã€‚
3. **é˜¶æ®µæŠ¥å‘Š**ï¼š
    - æ¯æ¬¡å®éªŒåæäº¤ï¼Œè®°å½•å®Œæˆçš„ä»»åŠ¡ï¼ˆå¦‚DFDç»˜åˆ¶ã€E-Rå›¾è®¾è®¡ï¼‰ã€‚
    - ä¸‹æ¬¡å®éªŒè¯¾ç­¾åæäº¤ã€‚
4. **æˆæœå±•ç¤º**ï¼š
    - å‡†å¤‡PPTï¼Œå±•ç¤ºç³»ç»ŸåŠŸèƒ½ï¼ˆæŸ¥è¯¢ã€ç»Ÿè®¡ã€ç•Œé¢ï¼‰ã€‚
    - æ¯äººå‚ä¸ç­”è¾©ï¼Œé˜è¿°ä¸ªäººè´¡çŒ®ã€‚
5. **ç³»ç»Ÿè°ƒè¯•**ï¼š
    - ç¡®ä¿SQLè„šæœ¬æ— è¯­æ³•é”™è¯¯ï¼Œæ•°æ®æ’å…¥æˆåŠŸã€‚
    - ç•Œé¢åŠŸèƒ½å¯æ“ä½œï¼ŒæŸ¥è¯¢ç»“æœæ­£ç¡®ã€‚

---

### **æ€»ç»“**
æœ¬å®éªŒæ¶µç›–æ•°æ®åº“è®¾è®¡å…¨æµç¨‹ï¼Œä»éœ€æ±‚åˆ†æåˆ°å®ç°ä¼˜åŒ–ã€‚é€šè¿‡å®ŒæˆDFDã€E-Rå›¾ã€å…³ç³»æ¨¡å‹ã€SQLå®ç°å’Œè´¢åŠ¡ç»Ÿè®¡ï¼Œå­¦ç”Ÿå¯æŒæ¡æ•°æ®åº“ç†è®ºä¸å®è·µã€‚